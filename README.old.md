<div align="center">

# ğŸ¸ BOLD è»½éŸ³ ãƒ¡ãƒ³ãƒãƒ¼ã‚µã‚¤ãƒˆ

**Next.js 16 + TypeScript ã«ã‚ˆã‚‹è»½éŸ³ã‚µãƒ¼ã‚¯ãƒ«å°‚ç”¨ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **

[![Next.js](https://img.shields.io/badge/Next.js-16.1-black?style=flat-square&logo=next.js)](https://nextjs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.0-blue?style=flat-square&logo=typescript)](https://www.typescriptlang.org/)
[![Prisma](https://img.shields.io/badge/Prisma-5.22-2D3748?style=flat-square&logo=prisma)](https://www.prisma.io/)
[![Tailwind CSS](https://img.shields.io/badge/Tailwind-4.0-38B2AC?style=flat-square&logo=tailwind-css)](https://tailwindcss.com/)

[ğŸŒ æœ¬ç•ªç’°å¢ƒ](https://keion-circle-site.vercel.app/)

</div>

---

## ğŸ“‹ ç›®æ¬¡

- [ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦](#-ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦)
- [æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯](#-æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯)
- [æ©Ÿèƒ½ä¸€è¦§](#-æ©Ÿèƒ½ä¸€è¦§)
- [é–‹ç™ºã‚¬ã‚¤ãƒ‰](#-é–‹ç™ºã‚¬ã‚¤ãƒ‰)
- [ãƒ†ã‚¹ãƒˆ](#-ãƒ†ã‚¹ãƒˆ)
- [CI/CD](#-cicd-ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³)
- [APIä»•æ§˜](#-apiä»•æ§˜)

---

## ğŸ¯ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

BOLD è»½éŸ³ãƒ¡ãƒ³ãƒãƒ¼ã‚µã‚¤ãƒˆã¯ã€è»½éŸ³ã‚µãƒ¼ã‚¯ãƒ«ã®æ´»å‹•ã‚’æ”¯æ´ã™ã‚‹ãƒ¢ãƒ€ãƒ³ãªWebã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚æ´»å‹•å ±å‘Šã®å…±æœ‰ã€ã‚¤ãƒ™ãƒ³ãƒˆç®¡ç†ã€ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«èª¿æ•´ãªã©ã€ã‚µãƒ¼ã‚¯ãƒ«æ´»å‹•ã«å¿…è¦ãªæ©Ÿèƒ½ã‚’çµ±åˆã—ã€ãƒ¡ãƒ³ãƒãƒ¼é–“ã®ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å††æ»‘ã«ã—ã¾ã™ã€‚

### ä¸»è¦ãªç‰¹å¾´

- ğŸš€ **é«˜é€Ÿ**: Next.js 16 App Router ã«ã‚ˆã‚‹æœ€é©åŒ–ã•ã‚ŒãŸãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
- ğŸ“± **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–**: ãƒ¢ãƒã‚¤ãƒ«ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆãƒ‡ã‚¶ã‚¤ãƒ³ã§å…¨ãƒ‡ãƒã‚¤ã‚¹ã«å¯¾å¿œ
- ï¿½ **PWAå¯¾å¿œ**: ãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ã—ã¦ã‚¢ãƒ—ãƒªã®ã‚ˆã†ã«åˆ©ç”¨å¯èƒ½
- ï¿½ğŸ”’ **ã‚»ã‚­ãƒ¥ã‚¢**: NextAuth.js v5 ã«ã‚ˆã‚‹å …ç‰¢ãªèªè¨¼ã‚·ã‚¹ãƒ†ãƒ 
- ğŸ­ **å½¹å‰²ç®¡ç†**: ç®¡ç†è€…ã¨ä¸€èˆ¬ãƒ¡ãƒ³ãƒãƒ¼ã®æ¨©é™åˆ†é›¢
- âš¡ **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ **: æ¥½è¦³çš„UI ã«ã‚ˆã‚‹å³åº§ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
- ğŸ¥ **ãƒ¡ãƒ‡ã‚£ã‚¢å¯¾å¿œ**: YouTubeå‹•ç”»åŸ‹ã‚è¾¼ã¿ã¨ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
- ğŸ“Š **çµ±è¨ˆè¡¨ç¤º**: å‚åŠ çŠ¶æ³ã‚„ã„ã„ã­æ•°ã®å¯è¦–åŒ–

---

## âœ¨ æ©Ÿèƒ½ä¸€è¦§

### 1ï¸âƒ£ èªè¨¼ã‚·ã‚¹ãƒ†ãƒ 

**æ©Ÿèƒ½è©³ç´°:**
- **Google OAuth 2.0**: ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯ãƒ­ã‚°ã‚¤ãƒ³ï¼ˆåå‰ã€ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã€ã‚¢ãƒã‚¿ãƒ¼ç”»åƒã‚’è‡ªå‹•ç™»éŒ²ï¼‰
- **ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ + ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰**: bcryptjsã«ã‚ˆã‚‹å®‰å…¨ãªãƒãƒƒã‚·ãƒ¥åŒ–
- **å½¹å‰²ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡**:
  - ğŸ”‘ **ç®¡ç†è€…ï¼ˆadminï¼‰**: å…¨æ©Ÿèƒ½ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã€ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ä½œæˆãƒ»ç·¨é›†ãƒ»å‰Šé™¤
  - ğŸ‘¤ **ä¸€èˆ¬ãƒ¡ãƒ³ãƒãƒ¼ï¼ˆmemberï¼‰**: é–²è¦§ã€å‚åŠ ç™»éŒ²ã€ã„ã„ã­ã€ã‚³ãƒ¡ãƒ³ãƒˆ

### 2ï¸âƒ£ æ´»å‹•å ±å‘Šï¼ˆæŠ•ç¨¿æ©Ÿèƒ½ï¼‰

**ç®¡ç†è€…ã®ã¿ä½œæˆå¯èƒ½ | å…¬é–‹ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ï¼ˆãƒ­ã‚°ã‚¤ãƒ³ä¸è¦ã§é–²è¦§ï¼‰**

- âœ… **Markdownå¯¾å¿œ**: ãƒªãƒƒãƒãƒ†ã‚­ã‚¹ãƒˆç·¨é›†ï¼ˆè¦‹å‡ºã—ã€ãƒªã‚¹ãƒˆã€å¤ªå­—ã€ãƒªãƒ³ã‚¯ï¼‰
- âœ… **è¤‡æ•°YouTubeå‹•ç”»**: 1ã¤ã®æŠ•ç¨¿ã«è¤‡æ•°å‹•ç”»ã‚’åŸ‹ã‚è¾¼ã¿
  - å¯¾å¿œãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ: `/watch`, `/live/`, `/shorts/`, `/embed/`, `youtu.be`
- âœ… **ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰**: Supabase Storageã«ã‚ˆã‚‹ç”»åƒç®¡ç†ï¼ˆè¤‡æ•°æšå¯¾å¿œï¼‰
- âœ… **å‚åŠ çŠ¶æ³ç®¡ç†**: ãƒ¡ãƒ³ãƒãƒ¼ãŒã€Œå‚åŠ ã€ã€Œä¸å‚åŠ ã€ã‚’ç™»éŒ²
- âœ… **ã„ã„ã­æ©Ÿèƒ½**: æ¥½è¦³çš„UIã«ã‚ˆã‚‹å³åº§ã®åæ˜ ï¼ˆãƒˆã‚°ãƒ«å¼ï¼‰
- âœ… **ã‚³ãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½**: ãƒã‚¹ãƒˆãªã—ã‚·ãƒ³ãƒ—ãƒ«ã‚³ãƒ¡ãƒ³ãƒˆ
- âœ… **ã‚¤ãƒ™ãƒ³ãƒˆ/ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‹ã‚‰ã®è‡ªå‹•ç”Ÿæˆ**: ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ©Ÿèƒ½ã§ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯ä½œæˆ

### 3ï¸âƒ£ ã‚¤ãƒ™ãƒ³ãƒˆç®¡ç†

**ç®¡ç†è€…ã®ã¿ä½œæˆå¯èƒ½ | ãƒ¡ãƒ³ãƒãƒ¼å…¨å“¡ãŒé–²è¦§ãƒ»å‚åŠ å¯èƒ½**

**æ©Ÿèƒ½è©³ç´°:**
- ğŸ“… **ã‚¤ãƒ™ãƒ³ãƒˆä½œæˆ**: æ—¥æ™‚ã€å ´æ‰€ã€å†…å®¹ã®è¨­å®š
- ğŸµ **èª²é¡Œæ›²ç®¡ç†**: 
  - æ›²åã€æ¥½è­œURLã€YouTubeå‹•ç”»URL
  - ãƒ‘ãƒ¼ãƒˆåˆ¥ã®æ‹…å½“è€…å‰²ã‚Šå½“ã¦ï¼ˆãƒœãƒ¼ã‚«ãƒ«ã€ã‚®ã‚¿ãƒ¼ã€ãƒ™ãƒ¼ã‚¹ã€ãƒ‰ãƒ©ãƒ ã€ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ï¼‰
- ğŸ‘¥ **å‚åŠ è€…ç®¡ç†**: ãƒ¡ãƒ³ãƒãƒ¼ã®å‚åŠ çŠ¶æ³ã‚’è¨˜éŒ²
- ğŸ’¬ **ã‚³ãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½**: ã‚¤ãƒ™ãƒ³ãƒˆã«å¯¾ã™ã‚‹ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
- ğŸ“ **æ´»å‹•å ±å‘Šã¸ã®å¤‰æ›**: ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±ã‚’ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ã—ã¦æ´»å‹•å ±å‘Šã‚’ä½œæˆ
  - ã‚¤ãƒ™ãƒ³ãƒˆè©³ç´°ã€èª²é¡Œæ›²ãƒªã‚¹ãƒˆã€å‚åŠ è€…ãƒªã‚¹ãƒˆã‚’è‡ªå‹•æŒ¿å…¥

### 4ï¸âƒ£ æ´»å‹•ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«

**ç®¡ç†è€…ã®ã¿ä½œæˆå¯èƒ½ | ãƒ¡ãƒ³ãƒãƒ¼å…¨å“¡ãŒé–²è¦§ãƒ»å‚åŠ å¯èƒ½**

- ğŸ“† **ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ä½œæˆ**: æ—¥æ™‚ã€å ´æ‰€ã€å†…å®¹ã®è¨­å®š
- ğŸ—ºï¸ **åœ°å›³ãƒªãƒ³ã‚¯**: Google Mapsãªã©ã®å ´æ‰€URLã‚’è¨­å®šå¯èƒ½
- ğŸ‘¥ **å‚åŠ è€…ç®¡ç†**: ãƒ¡ãƒ³ãƒãƒ¼ã®å‚åŠ çŠ¶æ³ã‚’è¨˜éŒ²
- ğŸ’¬ **ã‚³ãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½**: ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã«å¯¾ã™ã‚‹ã‚³ãƒ¡ãƒ³ãƒˆæŠ•ç¨¿
- ğŸ“ **æ´»å‹•å ±å‘Šã¸ã®å¤‰æ›**: ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«æƒ…å ±ã‚’ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ã—ã¦æ´»å‹•å ±å‘Šã‚’ä½œæˆ

### 5ï¸âƒ£ ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«

- ğŸ–¼ï¸ **ã‚¢ãƒã‚¿ãƒ¼ç”»åƒ**: Supabase Storageã«ã‚ˆã‚‹ç”»åƒç®¡ç†
- âœï¸ **è‡ªå·±ç´¹ä»‹**: ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æƒ…å ±ã®ç·¨é›†
- ğŸ¸ **æ‹…å½“æ¥½å™¨**: æ¥½å™¨æƒ…å ±ã®ç™»éŒ²
- ğŸ“Š **æ´»å‹•å±¥æ­´**: å‚åŠ ã—ãŸæ´»å‹•ã®ä¸€è¦§è¡¨ç¤º

### 6ï¸âƒ£ ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ï¼ˆç®¡ç†è€…ã®ã¿ï¼‰

- ğŸ‘¥ **ãƒ¡ãƒ³ãƒãƒ¼ä¸€è¦§**: å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¡¨ç¤º
- ğŸ”„ **å½¹å‰²å¤‰æ›´**: ä¸€èˆ¬ãƒ¡ãƒ³ãƒãƒ¼ â†” ç®¡ç†è€…ã®åˆ‡ã‚Šæ›¿ãˆ
- ğŸ“Š **æ´»å‹•çµ±è¨ˆ**: å„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å‚åŠ å›æ•°ãªã©ã‚’è¡¨ç¤º

---

## ğŸ›  æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰

| æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€” |
|------|-----------|------|
| Next.js | 16.1 | App Routerã€Server Componentsã€Server Actions |
| React | 19 | UIæ§‹ç¯‰ |
| TypeScript | 5.0 | å‹å®‰å…¨ãªé–‹ç™º |
| Tailwind CSS | 4.0 | ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆCSS |
| Lucide React | latest | ã‚¢ã‚¤ã‚³ãƒ³ãƒ©ã‚¤ãƒ–ãƒ©ãƒª |
| react-youtube | latest | YouTubeå‹•ç”»åŸ‹ã‚è¾¼ã¿ |

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰

| æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€” |
|------|-----------|------|
| Next.js API Routes | 16.1 | RESTful API |
| Prisma | 5.22 | ORMï¼ˆObject-Relational Mappingï¼‰ |
| PostgreSQL | latest | æœ¬ç•ªç’°å¢ƒãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆSupabaseï¼‰ |
| SQLite | latest | ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ |

### èªè¨¼

| æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€” |
|------|-----------|------|
| NextAuth.js | v5 | èªè¨¼ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ |
| Google OAuth 2.0 | - | ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒ­ã‚°ã‚¤ãƒ³ |
| bcryptjs | latest | ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒã‚·ãƒ¥åŒ– |

### ã‚¤ãƒ³ãƒ•ãƒ©

| ã‚µãƒ¼ãƒ“ã‚¹ | ç”¨é€” |
|---------|------|
| Vercel | ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ãƒ»CI/CD |
| Supabase | ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ»ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ |
| GitHub | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç† |

---

## ğŸ”Œ APIä»•æ§˜

### ğŸ“Š APIã‚µãƒãƒªãƒ¼

- **ç·ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆæ•°**: 35
- **å…¬é–‹ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½**: 6ï¼ˆèªè¨¼ä¸è¦ï¼‰
- **ãƒ¡ãƒ³ãƒãƒ¼æ¨©é™**: 19ï¼ˆmember/adminï¼‰
- **ç®¡ç†è€…å°‚ç”¨**: 10ï¼ˆadminï¼‰
- **HTTPãƒ¡ã‚½ãƒƒãƒ‰**: GET (8), POST (20), PUT (4), PATCH (2), DELETE (5)

###  API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆä¸€è¦§

#### æŠ•ç¨¿ (Posts) - `/api/posts`

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èªè¨¼ | æ¨©é™ | èª¬æ˜ |
|---------|--------------|------|------|------|
| GET | `/api/posts` | ä¸è¦ | public | æŠ•ç¨¿ä¸€è¦§ã‚’å–å¾—ï¼ˆæœ€æ–°50ä»¶ï¼‰ |
| POST | `/api/posts` | å¿…é ˆ | admin | æ–°è¦æŠ•ç¨¿ã‚’ä½œæˆ |
| GET | `/api/posts/[id]` | ä¸è¦ | public | ç‰¹å®šã®æŠ•ç¨¿ã‚’å–å¾— |
| PUT | `/api/posts/[id]` | å¿…é ˆ | admin | æŠ•ç¨¿ã‚’æ›´æ–° |
| DELETE | `/api/posts/[id]` | å¿…é ˆ | admin | æŠ•ç¨¿ã‚’å‰Šé™¤ |
| GET | `/api/posts/[id]/details` | ä¸è¦ | public | æŠ•ç¨¿è©³ç´°ï¼ˆã‚³ãƒ¡ãƒ³ãƒˆå«ã‚€ï¼‰ |
| POST | `/api/posts/[id]/comments` | å¿…é ˆ | member/admin | ã‚³ãƒ¡ãƒ³ãƒˆã‚’æŠ•ç¨¿ |
| POST | `/api/posts/[id]/like` | å¿…é ˆ | member/admin | ã„ã„ã­ã‚’ç™»éŒ²ãƒ»å‰Šé™¤ï¼ˆãƒˆã‚°ãƒ«ï¼‰ |
| DELETE | `/api/posts/[id]/like` | å¿…é ˆ | member/admin | ã„ã„ã­ã‚’å‰Šé™¤ |
| POST | `/api/posts/[id]/participate` | å¿…é ˆ | member/admin | å‚åŠ /ä¸å‚åŠ ã‚’ç™»éŒ² |
| DELETE | `/api/posts/[id]/participate` | å¿…é ˆ | member/admin | å‚åŠ ã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ« |
| POST | `/api/posts/image` | å¿…é ˆ | member/admin | ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼ˆBase64ï¼‰ |

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹: POST `/api/posts`**
```json
{
  "title": "2025å¹´12æœˆ ç¬¬1å›ã‚»ãƒƒã‚·ãƒ§ãƒ³",
  "content": "# ä»Šå›ã®å†…å®¹\n- ã‚®ã‚¿ãƒ¼ç·´ç¿’\n- ãƒ‰ãƒ©ãƒ ç·´ç¿’",
  "youtubeUrls": [
    "https://www.youtube.com/watch?v=xxxxx",
    "https://youtu.be/yyyyy"
  ],
  "images": [
    "https://supabase.co/storage/v1/object/public/avatars/image1.jpg"
  ]
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹: GET `/api/posts`**
```json
[
  {
    "id": "clx123abc",
    "title": "2025å¹´12æœˆ ç¬¬1å›ã‚»ãƒƒã‚·ãƒ§ãƒ³",
    "content": "# ä»Šå›ã®å†…å®¹\n- ã‚®ã‚¿ãƒ¼ç·´ç¿’",
    "youtubeUrls": ["https://www.youtube.com/watch?v=xxxxx"],
    "images": ["https://supabase.co/storage/..."],
    "createdAt": "2025-12-23T10:00:00Z",
    "userId": "user123",
    "user": {
      "id": "user123",
      "name": "å±±ç”°å¤ªéƒ",
      "email": "yamada@example.com",
      "avatarUrl": "https://..."
    },
    "participants": [
      {
        "id": "part123",
        "status": "participating",
        "user": { "id": "user456", "name": "ä½è—¤èŠ±å­" }
      }
    ],
    "likes": [
      { "userId": "user789", "createdAt": "2025-12-23T11:00:00Z" }
    ],
    "_count": { "comments": 5 }
  }
]
```

#### ã‚¤ãƒ™ãƒ³ãƒˆ (Events) - `/api/events`

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èªè¨¼ | æ¨©é™ | èª¬æ˜ |
|---------|--------------|------|------|------|
| GET | `/api/events` | å¿…é ˆ | member/admin | ã‚¤ãƒ™ãƒ³ãƒˆä¸€è¦§ã‚’å–å¾— |
| POST | `/api/events` | å¿…é ˆ | admin | ã‚¤ãƒ™ãƒ³ãƒˆã‚’ä½œæˆ |
| PUT | `/api/events/[id]` | å¿…é ˆ | admin | ã‚¤ãƒ™ãƒ³ãƒˆã‚’æ›´æ–° |
| DELETE | `/api/events/[id]` | å¿…é ˆ | admin | ã‚¤ãƒ™ãƒ³ãƒˆã‚’å‰Šé™¤ |
| POST | `/api/events/[id]/comments` | å¿…é ˆ | member/admin | ã‚³ãƒ¡ãƒ³ãƒˆã‚’æŠ•ç¨¿ |
| POST | `/api/events/[id]/participate` | å¿…é ˆ | member/admin | å‚åŠ ç™»éŒ²/è§£é™¤ï¼ˆãƒˆã‚°ãƒ«ï¼‰ |
| POST | `/api/events/[id]/report` | å¿…é ˆ | admin | æ´»å‹•å ±å‘Šã‚’ä½œæˆ |

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹: POST `/api/events`**
```json
{
  "title": "æ–°å¹´ãƒ©ã‚¤ãƒ–2025",
  "content": "æ–°å¹´æœ€åˆã®ãƒ©ã‚¤ãƒ–ã‚¤ãƒ™ãƒ³ãƒˆã§ã™",
  "date": "2025-01-15T18:00:00Z",
  "locationName": "å¸‚æ°‘ä¼šé¤¨ãƒ›ãƒ¼ãƒ«",
  "locationUrl": "https://maps.google.com/?q=...",
  "songs": [
    {
      "title": "Yesterday",
      "sheetUrl": "https://example.com/sheet.pdf",
      "youtubeUrl": "https://www.youtube.com/watch?v=xxxxx",
      "parts": {
        "vocal": "å±±ç”°å¤ªéƒ",
        "guitar": "ä½è—¤èŠ±å­",
        "bass": "éˆ´æœ¨ä¸€éƒ",
        "drums": "ç”°ä¸­æ¬¡éƒ",
        "keyboard": "é«˜æ©‹ä¸‰éƒ"
      }
    }
  ]
}
```

#### æ´»å‹•ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ« (Activity Schedules) - `/api/activity-schedules`

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èªè¨¼ | æ¨©é™ | èª¬æ˜ |
|---------|--------------|------|------|------|
| GET | `/api/activity-schedules` | å¿…é ˆ | member/admin | ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ä¸€è¦§ã‚’å–å¾— |
| POST | `/api/activity-schedules` | å¿…é ˆ | admin | ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½œæˆ |
| PUT | `/api/activity-schedules/[id]` | å¿…é ˆ | admin | ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’æ›´æ–° |
| DELETE | `/api/activity-schedules/[id]` | å¿…é ˆ | admin | ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’å‰Šé™¤ |
| POST | `/api/activity-schedules/[id]/comments` | å¿…é ˆ | member/admin | ã‚³ãƒ¡ãƒ³ãƒˆã‚’æŠ•ç¨¿ |
| POST | `/api/activity-schedules/[id]/participate` | å¿…é ˆ | member/admin | å‚åŠ ç™»éŒ²/è§£é™¤ |
| POST | `/api/activity-schedules/[id]/report` | å¿…é ˆ | admin | æ´»å‹•å ±å‘Šã‚’ä½œæˆ |

#### ãƒ¦ãƒ¼ã‚¶ãƒ¼ (Users) - `/api/users`

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èªè¨¼ | æ¨©é™ | èª¬æ˜ |
|---------|--------------|------|------|------|
| GET | `/api/users` | å¿…é ˆ | admin | ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§ã‚’å–å¾— |
| DELETE | `/api/users/[id]` | å¿…é ˆ | admin | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’å‰Šé™¤ |
| PATCH | `/api/users/[id]` | å¿…é ˆ | admin | ãƒ¦ãƒ¼ã‚¶ãƒ¼å½¹å‰²ã‚’æ›´æ–° |

#### ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ« (Profile) - `/api/profile`

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èªè¨¼ | æ¨©é™ | èª¬æ˜ |
|---------|--------------|------|------|------|
| PATCH | `/api/profile` | å¿…é ˆ | member/admin | è‡ªåˆ†ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’æ›´æ–° |
| POST | `/api/profile/avatar` | å¿…é ˆ | member/admin | ã‚¢ãƒã‚¿ãƒ¼ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ |

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹: PATCH `/api/profile`**
```json
{
  "name": "å±±ç”°å¤ªéƒ",
  "bio": "ã‚®ã‚¿ãƒ¼æ‹…å½“ã§ã™ã€‚ã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™ï¼",
  "instruments": "ã‚®ã‚¿ãƒ¼ã€ãƒ™ãƒ¼ã‚¹"
}
```

---

## ğŸ‘¨â€ğŸ’» é–‹ç™ºã‚¬ã‚¤ãƒ‰

### ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

#### 1. ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³ã¨ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
git clone https://github.com/shuhei0720/keion-circle-site.git
cd keion-circle-site
npm install
```

#### 2. Supabaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆ

1. [Supabase](https://supabase.com) ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆ
2. **New Project** ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’è¨­å®šã—ã¦ **Create new project** ã‚’ã‚¯ãƒªãƒƒã‚¯
4. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒä½œæˆã•ã‚Œã‚‹ã¾ã§æ•°åˆ†å¾…æ©Ÿ

**å¿…è¦ãªæƒ…å ±ã‚’å–å¾—**:
- **Project Settings** â†’ **Database** â†’ **Connection String** ã‚¿ãƒ–
  - **Session pooler** ã®æ¥ç¶šæ–‡å­—åˆ—ã‚’ã‚³ãƒ”ãƒ¼ï¼ˆãƒãƒ¼ãƒˆ5432ã€é–‹ç™ºç’°å¢ƒç”¨ï¼‰
  - `[YOUR-PASSWORD]` ã‚’å®Ÿéš›ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã«ç½®ãæ›ãˆ
- **Project Settings** â†’ **API** ã‚¿ãƒ–
  - **Project URL**: `https://xxxxx.supabase.co` ã‚’ã‚³ãƒ”ãƒ¼
  - **Project API keys** â†’ `anon` `public` ã‚­ãƒ¼ã‚’ã‚³ãƒ”ãƒ¼

**Storageãƒã‚±ãƒƒãƒˆã®ä½œæˆ**:
1. **Storage** â†’ **Create a new bucket** ã‚’ã‚¯ãƒªãƒƒã‚¯
2. Bucket name: `avatars`
3. **Public bucket** ã‚’ONã«ã—ã¦ **Create bucket** ã‚’ã‚¯ãƒªãƒƒã‚¯

#### 3. Google OAuthèªè¨¼ã®è¨­å®š

1. [Google Cloud Console](https://console.cloud.google.com/) ã«ã‚¢ã‚¯ã‚»ã‚¹
2. **æ–°ã—ã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ** ã¾ãŸã¯æ—¢å­˜ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é¸æŠ
3. **APIã¨ã‚µãƒ¼ãƒ“ã‚¹** â†’ **OAuthåŒæ„ç”»é¢** ã«ç§»å‹•
   - User Type: **å¤–éƒ¨** ã‚’é¸æŠã—ã¦ **ä½œæˆ**
   - ã‚¢ãƒ—ãƒªåã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚µãƒãƒ¼ãƒˆãƒ¡ãƒ¼ãƒ«ã€ãƒ‡ãƒ™ãƒ­ãƒƒãƒ‘ãƒ¼ã®é€£çµ¡å…ˆæƒ…å ±ã‚’å…¥åŠ›
   - **ä¿å­˜ã—ã¦æ¬¡ã¸** â†’ **ä¿å­˜ã—ã¦æ¬¡ã¸** â†’ **ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«æˆ»ã‚‹**
4. **èªè¨¼æƒ…å ±** â†’ **èªè¨¼æƒ…å ±ã‚’ä½œæˆ** â†’ **OAuth 2.0 ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆID** ã‚’é¸æŠ
   - ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ç¨®é¡: **ã‚¦ã‚§ãƒ–ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³**
   - åå‰: `BOLDè»½éŸ³ã‚µã‚¤ãƒˆ`
   - **æ‰¿èªæ¸ˆã¿ã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆURI** ã«ä»¥ä¸‹ã‚’è¿½åŠ :
     - `http://localhost:3000/api/auth/callback/google` (é–‹ç™ºç’°å¢ƒ)
     - `https://your-domain.vercel.app/api/auth/callback/google` (æœ¬ç•ªç’°å¢ƒ)
   - **ä½œæˆ** ã‚’ã‚¯ãƒªãƒƒã‚¯
5. **ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆID** ã¨ **ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆ** ã‚’ã‚³ãƒ”ãƒ¼

#### 4. AUTH_SECRETã®ç”Ÿæˆ

ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§å®‰å…¨ãªãƒ©ãƒ³ãƒ€ãƒ æ–‡å­—åˆ—ã‚’ç”Ÿæˆ:

```bash
openssl rand -base64 32
```

ã¾ãŸã¯

```bash
node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
```

å‡ºåŠ›ã•ã‚ŒãŸæ–‡å­—åˆ—ï¼ˆä¾‹: `hJuxPYaghehoKsbochfayrxjOLm3g+Z+CKoqrBsaCas=`ï¼‰ã‚’ã‚³ãƒ”ãƒ¼

#### 5. ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

```bash
cp .env.example .env.local
```

`.env.local` ã‚’é–‹ã„ã¦ä»¥ä¸‹ã‚’è¨­å®š:

```env
# èªè¨¼è¨­å®š
AUTH_URL=http://localhost:3000
AUTH_SECRET=<ã‚¹ãƒ†ãƒƒãƒ—4ã§ç”Ÿæˆã—ãŸæ–‡å­—åˆ—>
AUTH_TRUST_HOST=true

# NextAuth v5ç”¨
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=<AUTH_SECRETã¨åŒã˜å€¤>

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­å®šï¼ˆSupabaseã‹ã‚‰å–å¾—ï¼‰
DATABASE_URL="postgresql://postgres:[PASSWORD]@db.xxxxx.supabase.co:5432/postgres"

# Google OAuthï¼ˆGoogle Cloud Consoleã‹ã‚‰å–å¾—ï¼‰
GOOGLE_CLIENT_ID=123456789-xxxxx.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=GOCSPX-xxxxx

# Supabaseè¨­å®šï¼ˆSupabase Dashboardã‹ã‚‰å–å¾—ï¼‰
NEXT_PUBLIC_SUPABASE_URL=https://xxxxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.xxxxx
```

#### 6. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®åˆæœŸåŒ–

Supabase Dashboardã®SQL Editorã§ç›´æ¥SQLã‚’å®Ÿè¡Œã—ã¦ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚

1. [Supabase Dashboard](https://supabase.com/dashboard) â†’ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é¸æŠ â†’ **SQL Editor** ã‚’é–‹ã
2. **New query** ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ä»¥ä¸‹ã®SQLã‚’ã‚³ãƒ”ãƒ¼ã—ã¦è²¼ã‚Šä»˜ã‘
4. **Run** ã‚’ã‚¯ãƒªãƒƒã‚¯

<details>
<summary>ğŸ“‹ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–SQLï¼ˆã‚¯ãƒªãƒƒã‚¯ã—ã¦å±•é–‹ï¼‰</summary>

```sql
-- æ—¢å­˜ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å‰Šé™¤ï¼ˆã‚¯ãƒªãƒ¼ãƒ³ã‚¹ã‚¿ãƒ¼ãƒˆï¼‰
DROP TABLE IF EXISTS "Template" CASCADE;
DROP TABLE IF EXISTS "EventParticipant" CASCADE;
DROP TABLE IF EXISTS "Event" CASCADE;
DROP TABLE IF EXISTS "ActivityParticipant" CASCADE;
DROP TABLE IF EXISTS "ActivitySchedule" CASCADE;
DROP TABLE IF EXISTS "Comment" CASCADE;
DROP TABLE IF EXISTS "ScheduleResponse" CASCADE;
DROP TABLE IF EXISTS "ScheduleDate" CASCADE;
DROP TABLE IF EXISTS "Schedule" CASCADE;
DROP TABLE IF EXISTS "Message" CASCADE;
DROP TABLE IF EXISTS "PostLike" CASCADE;
DROP TABLE IF EXISTS "PostParticipant" CASCADE;
DROP TABLE IF EXISTS "Post" CASCADE;
DROP TABLE IF EXISTS "VerificationToken" CASCADE;
DROP TABLE IF EXISTS "Session" CASCADE;
DROP TABLE IF EXISTS "Account" CASCADE;
DROP TABLE IF EXISTS "User" CASCADE;

-- Userãƒ†ãƒ¼ãƒ–ãƒ«
CREATE TABLE "User" (
    "id" TEXT PRIMARY KEY,
    "name" TEXT,
    "email" TEXT UNIQUE,
    "password" TEXT,
    "avatarUrl" TEXT,
    "bio" TEXT,
    "instruments" TEXT,
    "role" TEXT NOT NULL DEFAULT 'member',
    "createdAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updatedAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP
);

-- Accountãƒ†ãƒ¼ãƒ–ãƒ«
CREATE TABLE "Account" (
    "id" TEXT PRIMARY KEY,
    "userId" TEXT NOT NULL,
    "type" TEXT NOT NULL,
    "provider" TEXT NOT NULL,
    "providerAccountId" TEXT NOT NULL,
    "refresh_token" TEXT,
    "access_token" TEXT,
    "expires_at" INTEGER,
    "token_type" TEXT,
    "scope" TEXT,
    "id_token" TEXT,
    "session_state" TEXT,
    CONSTRAINT "Account_userId_fkey" FOREIGN KEY ("userId") REFERENCES "User"("id") ON DELETE CASCADE,
    UNIQUE("provider", "providerAccountId")
);

-- Sessionãƒ†ãƒ¼ãƒ–ãƒ«
CREATE TABLE "Session" (
    "id" TEXT PRIMARY KEY,
    "sessionToken" TEXT NOT NULL UNIQUE,
    "userId" TEXT NOT NULL,
    "expires" TIMESTAMP(3) NOT NULL,
    CONSTRAINT "Session_userId_fkey" FOREIGN KEY ("userId") REFERENCES "User"("id") ON DELETE CASCADE
);

-- VerificationTokenãƒ†ãƒ¼ãƒ–ãƒ«
CREATE TABLE "VerificationToken" (
    "identifier" TEXT NOT NULL,
    "token" TEXT NOT NULL UNIQUE,
    "expires" TIMESTAMP(3) NOT NULL,
    UNIQUE("identifier", "token")
);

-- Postãƒ†ãƒ¼ãƒ–ãƒ«
CREATE TABLE "Post" (
    "id" TEXT PRIMARY KEY,
    "title" TEXT NOT NULL,
    "content" TEXT,
    "youtubeUrls" TEXT[] NOT NULL DEFAULT '{}',
    "images" TEXT[] NOT NULL DEFAULT '{}',
    "userId" TEXT NOT NULL,
    "eventId" TEXT,
    "activityScheduleId" TEXT,
    "createdAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updatedAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT "Post_userId_fkey" FOREIGN KEY ("userId") REFERENCES "User"("id") ON DELETE CASCADE
);

-- PostParticipantãƒ†ãƒ¼ãƒ–ãƒ«
CREATE TABLE "PostParticipant" (
    "id" TEXT PRIMARY KEY,
    "postId" TEXT NOT NULL,
    "userId" TEXT NOT NULL,
    "status" TEXT NOT NULL,
    "createdAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT "PostParticipant_postId_fkey" FOREIGN KEY ("postId") REFERENCES "Post"("id") ON DELETE CASCADE,
    CONSTRAINT "PostParticipant_userId_fkey" FOREIGN KEY ("userId") REFERENCES "User"("id") ON DELETE CASCADE,
    UNIQUE("postId", "userId")
);

-- PostLikeãƒ†ãƒ¼ãƒ–ãƒ«
CREATE TABLE "PostLike" (
    "id" TEXT PRIMARY KEY,
    "postId" TEXT NOT NULL,
    "userId" TEXT NOT NULL,
    "createdAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT "PostLike_postId_fkey" FOREIGN KEY ("postId") REFERENCES "Post"("id") ON DELETE CASCADE,
    CONSTRAINT "PostLike_userId_fkey" FOREIGN KEY ("userId") REFERENCES "User"("id") ON DELETE CASCADE,
    UNIQUE("postId", "userId")
);

-- Messageãƒ†ãƒ¼ãƒ–ãƒ«
CREATE TABLE "Message" (
    "id" TEXT PRIMARY KEY,
    "content" TEXT NOT NULL,
    "fileUrl" TEXT,
    "fileName" TEXT,
    "fileType" TEXT,
    "userId" TEXT NOT NULL,
    "createdAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT "Message_userId_fkey" FOREIGN KEY ("userId") REFERENCES "User"("id") ON DELETE CASCADE
);

-- Scheduleãƒ†ãƒ¼ãƒ–ãƒ«
CREATE TABLE "Schedule" (
    "id" TEXT PRIMARY KEY,
    "title" TEXT NOT NULL,
    "description" TEXT,
    "createdAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updatedAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP
);

-- ScheduleDateãƒ†ãƒ¼ãƒ–ãƒ«
CREATE TABLE "ScheduleDate" (
    "id" TEXT PRIMARY KEY,
    "scheduleId" TEXT NOT NULL,
    "date" TIMESTAMP(3) NOT NULL,
    "createdAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT "ScheduleDate_scheduleId_fkey" FOREIGN KEY ("scheduleId") REFERENCES "Schedule"("id") ON DELETE CASCADE
);

-- ScheduleResponseãƒ†ãƒ¼ãƒ–ãƒ«
CREATE TABLE "ScheduleResponse" (
    "id" TEXT PRIMARY KEY,
    "scheduleDateId" TEXT NOT NULL,
    "userId" TEXT NOT NULL,
    "status" TEXT NOT NULL,
    "comment" TEXT,
    "createdAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT "ScheduleResponse_scheduleDateId_fkey" FOREIGN KEY ("scheduleDateId") REFERENCES "ScheduleDate"("id") ON DELETE CASCADE,
    CONSTRAINT "ScheduleResponse_userId_fkey" FOREIGN KEY ("userId") REFERENCES "User"("id") ON DELETE CASCADE,
    UNIQUE("scheduleDateId", "userId")
);

-- ActivityScheduleãƒ†ãƒ¼ãƒ–ãƒ«
CREATE TABLE "ActivitySchedule" (
    "id" TEXT PRIMARY KEY,
    "title" TEXT NOT NULL,
    "content" TEXT,
    "date" TIMESTAMP(3),
    "location" TEXT,
    "locationUrl" TEXT,
    "userId" TEXT,
    "createdAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updatedAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT "ActivitySchedule_userId_fkey" FOREIGN KEY ("userId") REFERENCES "User"("id") ON DELETE SET NULL
);

-- ActivityParticipantãƒ†ãƒ¼ãƒ–ãƒ«
CREATE TABLE "ActivityParticipant" (
    "id" TEXT PRIMARY KEY,
    "activityScheduleId" TEXT NOT NULL,
    "userId" TEXT NOT NULL,
    "createdAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT "ActivityParticipant_activityScheduleId_fkey" FOREIGN KEY ("activityScheduleId") REFERENCES "ActivitySchedule"("id") ON DELETE CASCADE,
    CONSTRAINT "ActivityParticipant_userId_fkey" FOREIGN KEY ("userId") REFERENCES "User"("id") ON DELETE CASCADE,
    UNIQUE("activityScheduleId", "userId")
);

-- Eventãƒ†ãƒ¼ãƒ–ãƒ«
CREATE TABLE "Event" (
    "id" TEXT PRIMARY KEY,
    "title" TEXT NOT NULL,
    "content" TEXT,
    "date" TIMESTAMP(3),
    "locationName" TEXT,
    "locationUrl" TEXT,
    "songs" TEXT,
    "userId" TEXT,
    "createdAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updatedAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT "Event_userId_fkey" FOREIGN KEY ("userId") REFERENCES "User"("id") ON DELETE SET NULL
);

-- EventParticipantãƒ†ãƒ¼ãƒ–ãƒ«
CREATE TABLE "EventParticipant" (
    "id" TEXT PRIMARY KEY,
    "eventId" TEXT NOT NULL,
    "userId" TEXT NOT NULL,
    "createdAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT "EventParticipant_eventId_fkey" FOREIGN KEY ("eventId") REFERENCES "Event"("id") ON DELETE CASCADE,
    CONSTRAINT "EventParticipant_userId_fkey" FOREIGN KEY ("userId") REFERENCES "User"("id") ON DELETE CASCADE,
    UNIQUE("eventId", "userId")
);

-- Commentãƒ†ãƒ¼ãƒ–ãƒ«
CREATE TABLE "Comment" (
    "id" TEXT PRIMARY KEY,
    "content" TEXT NOT NULL,
    "userId" TEXT NOT NULL,
    "postId" TEXT,
    "activityScheduleId" TEXT,
    "eventId" TEXT,
    "createdAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updatedAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT "Comment_userId_fkey" FOREIGN KEY ("userId") REFERENCES "User"("id") ON DELETE CASCADE,
    CONSTRAINT "Comment_postId_fkey" FOREIGN KEY ("postId") REFERENCES "Post"("id") ON DELETE CASCADE,
    CONSTRAINT "Comment_activityScheduleId_fkey" FOREIGN KEY ("activityScheduleId") REFERENCES "ActivitySchedule"("id") ON DELETE CASCADE,
    CONSTRAINT "Comment_eventId_fkey" FOREIGN KEY ("eventId") REFERENCES "Event"("id") ON DELETE CASCADE
);

-- Templateãƒ†ãƒ¼ãƒ–ãƒ«
CREATE TABLE "Template" (
    "id" TEXT PRIMARY KEY,
    "name" TEXT NOT NULL,
    "content" TEXT NOT NULL,
    "createdAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updatedAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP
);

-- Post.eventIdå¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„ã‚’è¿½åŠ 
ALTER TABLE "Post" ADD CONSTRAINT "Post_eventId_fkey" FOREIGN KEY ("eventId") REFERENCES "Event"("id") ON DELETE SET NULL;

-- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’è¿½åŠ ï¼ˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Šï¼‰
CREATE INDEX "Account_userId_idx" ON "Account"("userId");
CREATE INDEX "Session_userId_idx" ON "Session"("userId");
CREATE INDEX "Post_userId_idx" ON "Post"("userId");
CREATE INDEX "Post_eventId_idx" ON "Post"("eventId");
CREATE INDEX "PostParticipant_postId_idx" ON "PostParticipant"("postId");
CREATE INDEX "PostParticipant_userId_idx" ON "PostParticipant"("userId");
CREATE INDEX "PostLike_postId_idx" ON "PostLike"("postId");
CREATE INDEX "PostLike_userId_idx" ON "PostLike"("userId");
CREATE INDEX "Comment_postId_idx" ON "Comment"("postId");
CREATE INDEX "Comment_eventId_idx" ON "Comment"("eventId");
CREATE INDEX "Comment_activityScheduleId_idx" ON "Comment"("activityScheduleId");
```

</details>

5. Prisma Clientã‚’ç”Ÿæˆ:

```bash
npx prisma generate
```

#### 7. ç®¡ç†è€…ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä½œæˆ

```bash
export $(cat .env.local | grep DATABASE_URL | xargs) && node scripts/create-admin.js admin@example.com password123 "ç®¡ç†è€…å"
```

#### 8. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•

```bash
npm run dev
```

ãƒ–ãƒ©ã‚¦ã‚¶ã§ [http://localhost:3000](http://localhost:3000) ã‚’é–‹ã„ã¦ãƒ­ã‚°ã‚¤ãƒ³:
- ãƒ¡ãƒ¼ãƒ«: `admin@example.com`
- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰: `password123`

---

## ğŸ§ª ãƒ†ã‚¹ãƒˆ

#### èªè¨¼è¨­å®š

| å¤‰æ•°å | èª¬æ˜ | å–å¾—æ–¹æ³• |
|--------|------|----------|
| `AUTH_URL` | ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ™ãƒ¼ã‚¹URL | é–‹ç™º: `http://localhost:3000`<br/>æœ¬ç•ª: `https://your-domain.vercel.app` |
| `AUTH_SECRET` | NextAuth.jsã®æš—å·åŒ–ã‚­ãƒ¼ | `openssl rand -base64 32` ã§ç”Ÿæˆ |
| `AUTH_TRUST_HOST` | Vercelã§ã®ãƒ›ã‚¹ãƒˆæ¤œè¨¼ã‚’ç„¡åŠ¹åŒ– | å¸¸ã« `true` |
| `NEXTAUTH_URL` | NextAuth v5ç”¨ã®URL | `AUTH_URL`ã¨åŒã˜å€¤ |
| `NEXTAUTH_SECRET` | NextAuth v5ç”¨ã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆ | `AUTH_SECRET`ã¨åŒã˜å€¤ |

#### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­å®š

| å¤‰æ•°å | èª¬æ˜ | å–å¾—æ–¹æ³• |
|--------|------|----------|
| `DATABASE_URL` | PostgreSQLæ¥ç¶šæ–‡å­—åˆ— | **Supabase Dashboard** â†’ **Project Settings** â†’ **Database** â†’ **Connection String** â†’ **Session pooler**<br/>`postgresql://postgres:[PASSWORD]@db.xxxxx.supabase.co:5432/postgres`<br/>ã¾ãŸã¯ **Transaction pooler**ï¼ˆãƒãƒ¼ãƒˆ6543ï¼‰ã‚‚ä½¿ç”¨å¯èƒ½ |

#### Google OAuthè¨­å®š

| å¤‰æ•°å | èª¬æ˜ | å–å¾—æ–¹æ³• |
|--------|------|----------|
| `GOOGLE_CLIENT_ID` | Google OAuthã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆID | [Google Cloud Console](https://console.cloud.google.com/) â†’ **APIã¨ã‚µãƒ¼ãƒ“ã‚¹** â†’ **èªè¨¼æƒ…å ±** â†’ ä½œæˆã—ãŸOAuth 2.0ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆIDã‚’ã‚¯ãƒªãƒƒã‚¯ |
| `GOOGLE_CLIENT_SECRET` | Google OAuthã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆ | åŒä¸Š |

#### Supabaseè¨­å®š

| å¤‰æ•°å | èª¬æ˜ | å–å¾—æ–¹æ³• |
|--------|------|----------|
| `NEXT_PUBLIC_SUPABASE_URL` | Supabaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆURL | **Supabase Dashboard** â†’ **Project Settings** â†’ **API** â†’ **Project URL** |
| `NEXT_PUBLIC_SUPABASE_ANON_KEY` | SupabaseåŒ¿åã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼ | **Supabase Dashboard** â†’ **Project Settings** â†’ **API** â†’ **Project API keys** â†’ `anon` `public` |

### ğŸ” ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

#### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šã‚¨ãƒ©ãƒ¼

**ã‚¨ãƒ©ãƒ¼**: `Can't reach database server`

**è§£æ±ºç­–**:
1. Supabaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒèµ·å‹•ã—ã¦ã„ã‚‹ã‹ç¢ºèªï¼ˆç„¡æ–™ãƒ—ãƒ©ãƒ³ã¯1é€±é–“éã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã§ä¸€æ™‚åœæ­¢ï¼‰
2. `DATABASE_URL`ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒæ­£ã—ã„ã‹ç¢ºèª
3. Session poolerï¼ˆãƒãƒ¼ãƒˆ5432ï¼‰ã¾ãŸã¯Transaction poolerï¼ˆãƒãƒ¼ãƒˆ6543ï¼‰ã‚’ä½¿ç”¨

#### Google OAuthèªè¨¼ã‚¨ãƒ©ãƒ¼

**ã‚¨ãƒ©ãƒ¼**: `redirect_uri_mismatch`

**è§£æ±ºç­–**:
1. Google Cloud Consoleã® **æ‰¿èªæ¸ˆã¿ã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆURI** ã«ä»¥ä¸‹ãŒè¿½åŠ ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª:
   - é–‹ç™º: `http://localhost:3000/api/auth/callback/google`
   - æœ¬ç•ª: `https://your-domain.vercel.app/api/auth/callback/google`
2. URIã«ä½™åˆ†ãªã‚¹ãƒšãƒ¼ã‚¹ã‚„æ”¹è¡ŒãŒãªã„ã‹ç¢ºèª
3. HTTPSã¨HTTPã‚’é–“é•ãˆã¦ã„ãªã„ã‹ç¢ºèª

#### Prisma Clientç”Ÿæˆã‚¨ãƒ©ãƒ¼

**ã‚¨ãƒ©ãƒ¼**: `Environment variable not found: DATABASE_URL`

**è§£æ±ºç­–**:
```bash
export $(cat .env.local | grep DATABASE_URL | xargs)
npx prisma generate
```

ã¾ãŸã¯ã€`.env.local`ãŒæ­£ã—ã„å ´æ‰€ã«ã‚ã‚‹ã‹ç¢ºèªã—ã¦ãã ã•ã„ã€‚
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret

# Supabaseè¨­å®šï¼ˆç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ç”¨ï¼‰
NEXT_PUBLIC_SUPABASE_URL=https://your-project-id.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-supabase-anon-key
```

**æœ¬ç•ªç’°å¢ƒï¼ˆVercelï¼‰**: ä¸Šè¨˜ã¨åŒã˜ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã—ã¾ã™ãŒã€`AUTH_URL` ã¨ `NEXTAUTH_URL` ã‚’æœ¬ç•ªURLã«å¤‰æ›´ã—ã¦ãã ã•ã„ã€‚

### ğŸ—„ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œ

**ã‚¹ã‚­ãƒ¼ãƒå¤‰æ›´ã®æµã‚Œ:**

1. `prisma/schema.prisma` ã‚’ç·¨é›†
2. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«åæ˜ :
   ```bash
   npx prisma db push
   npx prisma generate
   ```
3. æœ¬ç•ªç’°å¢ƒ: Vercel ã§è‡ªå‹•çš„ã« `npm run build` ãŒå®Ÿè¡Œã•ã‚Œã€ã‚¹ã‚­ãƒ¼ãƒãŒé©ç”¨ã•ã‚Œã¾ã™

**åˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ™‚ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–:**

```bash
# Prisma Clientã‚’ç”Ÿæˆ
npx prisma generate

# ã‚¹ã‚­ãƒ¼ãƒã‚’ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«é©ç”¨
npx prisma db push

# ç®¡ç†è€…ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆ
node scripts/create-admin.js admin@example.com password123 "ç®¡ç†è€…å"
```

**Prisma Studio ã§ãƒ‡ãƒ¼ã‚¿ç¢ºèª:**

```bash
npx prisma studio
```

ãƒ–ãƒ©ã‚¦ã‚¶ã§ http://localhost:5555 ãŒé–‹ãã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®å†…å®¹ã‚’GUIã§ç¢ºèªãƒ»ç·¨é›†ã§ãã¾ã™ã€‚

### ğŸ” èªè¨¼ãƒ•ãƒ­ãƒ¼å®Ÿè£…ä¾‹

**ã‚µãƒ¼ãƒãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§èªè¨¼ç¢ºèª:**

```typescript
import { getServerSession } from "next-auth";
import { authOptions } from "@/lib/auth";

export default async function Page() {
  const session = await getServerSession(authOptions);
  
  if (!session) {
    redirect("/auth/signin");
  }
  
  // ç®¡ç†è€…ãƒã‚§ãƒƒã‚¯
  if (session.user.role !== "admin") {
    return <div>ç®¡ç†è€…ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã§ã™</div>;
  }
  
  return <div>ç®¡ç†è€…ãƒšãƒ¼ã‚¸</div>;
}
```

**API Routeã§èªè¨¼ç¢ºèª:**

```typescript
import { getServerSession } from "next-auth";
import { authOptions } from "@/lib/auth";
import { NextRequest, NextResponse } from "next/server";

export async function POST(req: NextRequest) {
  const session = await getServerSession(authOptions);
  
  if (!session) {
    return NextResponse.json(
      { error: "èªè¨¼ãŒå¿…è¦ã§ã™" },
      { status: 401 }
    );
  }
  
  if (session.user.role !== "admin") {
    return NextResponse.json(
      { error: "ç®¡ç†è€…æ¨©é™ãŒå¿…è¦ã§ã™" },
      { status: 403 }
    );
  }
  
  // å‡¦ç†...
}
```

### ğŸ¨ ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°ã‚¬ã‚¤ãƒ‰

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯Tailwind CSS v4ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚

**ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ:**
- ãƒ—ãƒ©ã‚¤ãƒãƒª: `bg-blue-500`, `text-blue-600`
- ã‚»ã‚«ãƒ³ãƒ€ãƒª: `bg-gray-500`, `text-gray-600`
- æˆåŠŸ: `bg-green-500`, `text-green-600`
- ã‚¨ãƒ©ãƒ¼: `bg-red-500`, `text-red-600`
- è­¦å‘Š: `bg-yellow-500`, `text-yellow-600`

**ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³:**
```tsx
<div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
  {/* ãƒ¢ãƒã‚¤ãƒ«: 1åˆ—ã€ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆ: 2åˆ—ã€ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—: 3åˆ— */}
</div>
```

### ğŸ§ª ãƒ†ã‚¹ãƒˆä»•æ§˜

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯åŒ…æ‹¬çš„ãªè‡ªå‹•ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚

#### ãƒ†ã‚¹ãƒˆæ§‹æˆ

| ãƒ†ã‚¹ãƒˆã‚¿ã‚¤ãƒ— | ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ | å¯¾è±¡ | å®Ÿè¡Œæ™‚é–“ |
|------------|-------------|------|---------|
| **Lint** | ESLint | ã‚³ãƒ¼ãƒ‰å“è³ªãƒ»ã‚¹ã‚¿ã‚¤ãƒ« | ~30ç§’ |
| **Type Check** | TypeScript | å‹å®‰å…¨æ€§ | ~10ç§’ |
| **Unit Tests** | Jest + React Testing Library | ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ»é–¢æ•° | ~5ç§’ |
| **Integration Tests** | Jest | API Routesãƒ»DBæ“ä½œ | ~10ç§’ |
| **E2E Tests** | Playwright | ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ­ãƒ¼ï¼ˆChromiumï¼‰ | ~5-7åˆ† |
| **Build** | Next.js | æœ¬ç•ªãƒ“ãƒ«ãƒ‰æ¤œè¨¼ | ~20ç§’ |

#### ãƒ†ã‚¹ãƒˆã‚³ãƒãƒ³ãƒ‰

```bash
# å…¨ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
npm test                    # Jestã‚¦ã‚©ãƒƒãƒãƒ¢ãƒ¼ãƒ‰

# å€‹åˆ¥å®Ÿè¡Œ
npm run lint                # ESLint
npx tsc --noEmit           # å‹ãƒã‚§ãƒƒã‚¯
npm run test:unit          # ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ + ã‚«ãƒãƒ¬ãƒƒã‚¸
npm run test:integration   # çµ±åˆãƒ†ã‚¹ãƒˆ
npm run test:e2e           # E2Eãƒ†ã‚¹ãƒˆ
npm run test:e2e:ui        # E2E UIãƒ¢ãƒ¼ãƒ‰ï¼ˆãƒ‡ãƒãƒƒã‚°ç”¨ï¼‰

# CIç’°å¢ƒç”¨
npm run test:ci            # ã‚«ãƒãƒ¬ãƒƒã‚¸ä»˜ããƒ†ã‚¹ãƒˆ
```

#### ã‚«ãƒãƒ¬ãƒƒã‚¸ç›®æ¨™

ç¾åœ¨ã¯åŸºæœ¬çš„ãªãƒ†ã‚¹ãƒˆæ§‹é€ ã®ã¿å®Ÿè£…æ¸ˆã¿ã€‚ä»Šå¾Œ70%ã®ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’ç›®æŒ‡ã—ã¾ã™ã€‚

```
ç›®æ¨™ã‚«ãƒãƒ¬ãƒƒã‚¸: 70%
- Branches: 70%
- Functions: 70%
- Lines: 70%
- Statements: 70%
```

#### E2Eãƒ†ã‚¹ãƒˆè©³ç´°

**ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ª:**
- èªè¨¼ãƒ•ãƒ­ãƒ¼ï¼ˆãƒ­ã‚°ã‚¤ãƒ³ãƒ»ãƒ­ã‚°ã‚¢ã‚¦ãƒˆãƒ»ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼‰
- æŠ•ç¨¿ç®¡ç†ï¼ˆä½œæˆãƒ»è¡¨ç¤ºãƒ»ã„ã„ã­ãƒ»ã‚³ãƒ¡ãƒ³ãƒˆãƒ»å‰Šé™¤ï¼‰
- ã‚¤ãƒ™ãƒ³ãƒˆç®¡ç†ï¼ˆä½œæˆãƒ»å‚åŠ ãƒ»èª²é¡Œæ›²è¿½åŠ ãƒ»å ±å‘Šä½œæˆï¼‰

**ãƒ–ãƒ©ã‚¦ã‚¶å¯¾å¿œ:**
- CIç’°å¢ƒ: Chromiumã®ã¿ï¼ˆé«˜é€ŸåŒ–ï¼‰
- ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒ: Chromium, Firefox, WebKit, Mobile Chrome, Mobile Safari
- é€±æ¬¡ãƒ•ãƒ«ãƒ†ã‚¹ãƒˆ: å…¨ãƒ–ãƒ©ã‚¦ã‚¶ã§è‡ªå‹•å®Ÿè¡Œï¼ˆæ¯é€±æ—¥æ›œæ—¥ï¼‰

**è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«:**
- `playwright.config.ts`: E2Eãƒ†ã‚¹ãƒˆè¨­å®š
- `jest.config.js`: ãƒ¦ãƒ‹ãƒƒãƒˆãƒ»çµ±åˆãƒ†ã‚¹ãƒˆè¨­å®š
- `jest.setup.js`: ãƒ†ã‚¹ãƒˆãƒ¢ãƒƒã‚¯è¨­å®š

---

## ğŸš€ CI/CD ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³

### GitHub Actions ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯è‡ªå‹•åŒ–ã•ã‚ŒãŸCI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚

```
ã‚³ãƒŸãƒƒãƒˆ â†’ GitHub
    â†“
    â”œâ”€â†’ GitHub Actionsï¼ˆãƒ†ã‚¹ãƒˆå®Ÿè¡Œãƒ»ä¸¦åˆ—ï¼‰
    â”‚   â”œâ”€ Lint âœ“
    â”‚   â”œâ”€ Type Check âœ“
    â”‚   â”œâ”€ Unit Tests âœ“
    â”‚   â”œâ”€ Integration Tests âœ“
    â”‚   â”œâ”€ E2E Tests âœ“
    â”‚   â””â”€ Build âœ“
    â”‚
    â””â”€â†’ Vercelï¼ˆè‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ï¼‰
        â”œâ”€ mainãƒ–ãƒ©ãƒ³ãƒ â†’ æœ¬ç•ªç’°å¢ƒ
        â””â”€ developãƒ–ãƒ©ãƒ³ãƒ â†’ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç’°å¢ƒ
```

### ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼è©³ç´°

#### 1. ãƒ¡ã‚¤ãƒ³CIï¼ˆ`.github/workflows/ci.yml`ï¼‰

**ãƒˆãƒªã‚¬ãƒ¼:**
- `main`, `develop`ãƒ–ãƒ©ãƒ³ãƒã¸ã®ãƒ—ãƒƒã‚·ãƒ¥
- `main`, `develop`ã¸ã®Pull Request

**ã‚¸ãƒ§ãƒ–æ§‹æˆ:**

| ã‚¸ãƒ§ãƒ– | å®Ÿè¡Œå†…å®¹ | ä¾å­˜é–¢ä¿‚ | æƒ³å®šæ™‚é–“ |
|-------|---------|---------|---------|
| **lint** | ESLintãƒã‚§ãƒƒã‚¯ | ãªã— | 30ç§’ |
| **type-check** | TypeScriptå‹ãƒã‚§ãƒƒã‚¯ + Prismaç”Ÿæˆ | ãªã— | 10ç§’ |
| **unit-tests** | Jestãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ + Codecovã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ | ãªã— | 5ç§’ |
| **integration-tests** | çµ±åˆãƒ†ã‚¹ãƒˆ + PostgreSQLã‚³ãƒ³ãƒ†ãƒŠ | ãªã— | 10ç§’ |
| **e2e-tests** | Playwright E2Eãƒ†ã‚¹ãƒˆï¼ˆChromiumã®ã¿ï¼‰ | ãªã— | 5-7åˆ† |
| **build** | Next.jsæœ¬ç•ªãƒ“ãƒ«ãƒ‰ | lint, type-check, unit-tests | 20ç§’ |

**ç’°å¢ƒå¤‰æ•°:**
```yaml
NODE_VERSION: '20'
DATABASE_URL: postgresql://postgres:postgres@localhost:5432/test  # ãƒ†ã‚¹ãƒˆç”¨
NEXTAUTH_SECRET: test-secret
AUTH_SECRET: test-secret
```

**ä¸¦åˆ—å®Ÿè¡Œ:** lint, type-check, unit-tests, integration-tests, e2e-testsã¯ä¸¦åˆ—å®Ÿè¡Œã•ã‚Œã€ç´„7åˆ†ã§å®Œäº†

#### 2. é€±æ¬¡ãƒ•ãƒ«E2Eï¼ˆ`.github/workflows/full-e2e.yml`ï¼‰

**ãƒˆãƒªã‚¬ãƒ¼:**
- æ¯é€±æ—¥æ›œæ—¥ åˆå‰2æ™‚ï¼ˆUTCï¼‰ã«è‡ªå‹•å®Ÿè¡Œ
- æ‰‹å‹•å®Ÿè¡Œå¯èƒ½ï¼ˆActions â†’ Full E2E Tests â†’ Run workflowï¼‰

**å®Ÿè¡Œå†…å®¹:**
- å…¨ãƒ–ãƒ©ã‚¦ã‚¶ï¼ˆChromium, Firefox, WebKit, Mobile Chrome, Mobile Safariï¼‰ã§E2Eãƒ†ã‚¹ãƒˆ
- ã‚¯ãƒ­ã‚¹ãƒ–ãƒ©ã‚¦ã‚¶äº’æ›æ€§ã®ç¢ºèª
- æƒ³å®šæ™‚é–“: 15-25åˆ†

#### 3. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒ³ï¼ˆ`.github/workflows/codeql.yml`ï¼‰

**ãƒˆãƒªã‚¬ãƒ¼:**
- æ¯é€±æ—¥æ›œæ—¥ã«è‡ªå‹•å®Ÿè¡Œ
- `main`ãƒ–ãƒ©ãƒ³ãƒã¸ã®ãƒ—ãƒƒã‚·ãƒ¥ãƒ»PR

**å®Ÿè¡Œå†…å®¹:**
- CodeQLé™çš„è§£æï¼ˆJavaScript/TypeScriptï¼‰
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è„†å¼±æ€§ã®æ¤œå‡º

### Vercelãƒ‡ãƒ—ãƒ­ã‚¤

**è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤:**
- Vercelã®GitHubçµ±åˆã«ã‚ˆã‚Šã€GitHubã¸ã®ãƒ—ãƒƒã‚·ãƒ¥ã§è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤
- GitHub Actionsã®ãƒ†ã‚¹ãƒˆçµæœã¨ã¯ç‹¬ç«‹ã—ã¦å®Ÿè¡Œ

**ãƒ‡ãƒ—ãƒ­ã‚¤å…ˆ:**
- `main`ãƒ–ãƒ©ãƒ³ãƒ â†’ https://keion-circle-site.vercel.app/ï¼ˆæœ¬ç•ªç’°å¢ƒï¼‰
- `develop`ãƒ–ãƒ©ãƒ³ãƒ â†’ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼URL
- Pull Request â†’ å°‚ç”¨ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼URL

**ãƒ“ãƒ«ãƒ‰ã‚³ãƒãƒ³ãƒ‰:**
```bash
prisma generate && next build
```

**ç’°å¢ƒå¤‰æ•°ï¼ˆVercel Dashboardè¨­å®šï¼‰:**
```env
# èªè¨¼
AUTH_URL=https://keion-circle-site.vercel.app
AUTH_SECRET=<ãƒ©ãƒ³ãƒ€ãƒ æ–‡å­—åˆ—>
AUTH_TRUST_HOST=true
NEXTAUTH_URL=https://keion-circle-site.vercel.app
NEXTAUTH_SECRET=<AUTH_SECRETã¨åŒã˜>

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆé‡è¦: Transaction Poolerä½¿ç”¨ï¼‰
DATABASE_URL=postgresql://[user]:[password]@[host]:6543/postgres?pgbouncer=true

# Google OAuth
GOOGLE_CLIENT_ID=<Google Cloud Console>
GOOGLE_CLIENT_SECRET=<Google Cloud Console>

# Supabase Storage
NEXT_PUBLIC_SUPABASE_URL=<Supabase Project URL>
NEXT_PUBLIC_SUPABASE_ANON_KEY=<Supabase Anon Key>
```

**âš ï¸ é‡è¦: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šè¨­å®š**

Vercelãªã©ã®ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ç’°å¢ƒã§ã¯ã€å¿…ãš**Transaction Poolerï¼ˆãƒãƒ¼ãƒˆ6543ï¼‰**ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ï¼š

```env
# âœ… æ­£ã—ã„ï¼ˆã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ç’°å¢ƒï¼‰
DATABASE_URL=postgresql://[user]:[password]@[host]:6543/postgres?pgbouncer=true

# âŒ èª¤ã‚Šï¼ˆæ¥ç¶šæ•°åˆ¶é™ã‚¨ãƒ©ãƒ¼ï¼‰
DATABASE_URL=postgresql://[user]:[password]@[host]:5432/postgres
```

**ç†ç”±:**
- ãƒãƒ¼ãƒˆ5432ï¼ˆSession Modeï¼‰: æ•°åã®æ¥ç¶šã®ã¿ â†’ ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ã§ã¯`MaxClientsInSessionMode`ã‚¨ãƒ©ãƒ¼
- ãƒãƒ¼ãƒˆ6543ï¼ˆTransaction Poolerï¼‰: æ•°åƒã®æ¥ç¶šã«å¯¾å¿œ â†’ ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ç’°å¢ƒã§å¿…é ˆ

### ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ•ãƒ­ãƒ¼æ¨å¥¨äº‹é …

1. **developãƒ–ãƒ©ãƒ³ãƒã§é–‹ç™º**
   ```bash
   git checkout develop
   git commit -m "feat: æ–°æ©Ÿèƒ½"
   git push origin develop
   ```

2. **GitHub Actionsã§ãƒ†ã‚¹ãƒˆç¢ºèª**
   - https://github.com/shuhei0720/keion-circle-site/actions
   - å…¨ãƒ†ã‚¹ãƒˆãŒPassã™ã‚‹ã“ã¨ã‚’ç¢ºèª

3. **Vercelãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç¢ºèª**
   - ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼URLã§å‹•ä½œç¢ºèª
   - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šã€èªè¨¼ã€æ©Ÿèƒ½ãŒæ­£å¸¸å‹•ä½œ

4. **mainãƒ–ãƒ©ãƒ³ãƒã¸ãƒãƒ¼ã‚¸**
   ```bash
   git checkout main
   git merge develop
   git push origin main
   ```

5. **æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤è‡ªå‹•å®Ÿè¡Œ**
   - VercelãŒè‡ªå‹•ã§æœ¬ç•ªç’°å¢ƒã«ãƒ‡ãƒ—ãƒ­ã‚¤
   - https://keion-circle-site.vercel.app/ ã§ç¢ºèª

### ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

#### GitHub ActionsãŒå¤±æ•—ã™ã‚‹

**Lintå¤±æ•—:**
```bash
npm run lint  # ãƒ­ãƒ¼ã‚«ãƒ«ã§ç¢ºèª
```

**Type Checkå¤±æ•—:**
```bash
npx tsc --noEmit  # å‹ã‚¨ãƒ©ãƒ¼ã‚’ç¢ºèª
```

**E2Eãƒ†ã‚¹ãƒˆã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ:**
- Playwrightãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«: `npx playwright install`
- ãƒ†ã‚¹ãƒˆç’°å¢ƒã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç¢ºèª

#### Vercelãƒ‡ãƒ—ãƒ­ã‚¤ãŒå¤±æ•—ã™ã‚‹

**ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼:**
1. ç’°å¢ƒå¤‰æ•°ãŒå…¨ã¦è¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
2. `DATABASE_URL`ãŒTransaction Poolerï¼ˆãƒãƒ¼ãƒˆ6543ï¼‰ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã‹ç¢ºèª
3. ãƒ­ãƒ¼ã‚«ãƒ«ã§`npm run build`ãŒæˆåŠŸã™ã‚‹ã‹ç¢ºèª

**ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šã‚¨ãƒ©ãƒ¼:**
```
MaxClientsInSessionMode: max clients reached
```
â†’ `DATABASE_URL`ã‚’ãƒãƒ¼ãƒˆ6543ã«å¤‰æ›´ã—ã€`?pgbouncer=true`ã‚’è¿½åŠ 

**èªè¨¼ã‚¨ãƒ©ãƒ¼:**
- Google Cloud Consoleã®OAuthèªè¨¼æƒ…å ±ã§ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆURIã‚’ç¢ºèª
- `AUTH_URL`ã¨`NEXTAUTH_URL`ãŒæ­£ã—ã„ã‹ç¢ºèª

### ç›£è¦–ã¨ãƒ­ã‚°

**Vercel Dashboard:**
- Runtime Logs: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ­ã‚°ç¢ºèª
- Deployment Logs: ãƒ“ãƒ«ãƒ‰ãƒ­ã‚°ç¢ºèª
- Analytics: ã‚¢ã‚¯ã‚»ã‚¹è§£æ

**GitHub Actions:**
- Actions ã‚¿ãƒ–: ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè¡Œå±¥æ­´
- Artifacts: ãƒ†ã‚¹ãƒˆãƒ¬ãƒãƒ¼ãƒˆã€Playwrightãƒ¬ãƒãƒ¼ãƒˆã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

**Codecovï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰:**
- https://codecov.io ã§ã‚«ãƒãƒ¬ãƒƒã‚¸æ¨ç§»ã‚’ç¢ºèª
- PRã”ã¨ã®ã‚«ãƒãƒ¬ãƒƒã‚¸å¤‰åŒ–ã‚’è‡ªå‹•ã‚³ãƒ¡ãƒ³ãƒˆ

---

## ğŸ” ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

- âœ… **ç’°å¢ƒå¤‰æ•°**: `.env.local` ã¯ Git ã«å«ã‚ãªã„ï¼ˆ`.gitignore` è¨­å®šæ¸ˆã¿ï¼‰
- âœ… **ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰**: bcryptjs ã«ã‚ˆã‚‹å®‰å…¨ãªãƒãƒƒã‚·ãƒ¥åŒ–ï¼ˆã‚½ãƒ«ãƒˆãƒ©ã‚¦ãƒ³ãƒ‰10ï¼‰
- âœ… **èªè¨¼**: NextAuth.js v5 ã«ã‚ˆã‚‹å …ç‰¢ãªèªè¨¼
- âœ… **CSRFå¯¾ç­–**: NextAuth.js ã®æ¨™æº–ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ©Ÿèƒ½
- âœ… **SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³**: Prisma ã«ã‚ˆã‚‹è‡ªå‹•é˜²æ­¢
- âœ… **XSSå¯¾ç­–**: React ã®è‡ªå‹•ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—
- âœ… **ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰**: ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºåˆ¶é™ï¼ˆ2MBï¼‰ã€MIME typeæ¤œè¨¼

---

## ğŸ“ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ MIT ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®ä¸‹ã§ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã•ã‚Œã¦ã„ã¾ã™ã€‚

---

## ğŸ¤ ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³

ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æ­“è¿ã—ã¾ã™ï¼ãƒã‚°å ±å‘Šã‚„æ©Ÿèƒ½ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯ [GitHub Issues](https://github.com/shuhei0720/keion-circle-site/issues) ã«ãŠé¡˜ã„ã—ã¾ã™ã€‚

**ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³æ‰‹é †:**
1. ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã‚’ãƒ•ã‚©ãƒ¼ã‚¯
2. æ©Ÿèƒ½ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ (`git checkout -b feature/amazing-feature`)
3. å¤‰æ›´ã‚’ã‚³ãƒŸãƒƒãƒˆ (`git commit -m 'Add amazing feature'`)
4. ãƒ–ãƒ©ãƒ³ãƒã«ãƒ—ãƒƒã‚·ãƒ¥ (`git push origin feature/amazing-feature`)
5. ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ä½œæˆ

---

## ğŸ“ ãŠå•ã„åˆã‚ã›

è³ªå•ã‚„ææ¡ˆãŒã‚ã‚‹å ´åˆã¯ã€[GitHub Issues](https://github.com/shuhei0720/keion-circle-site/issues) ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚

---

<div align="center">

**Built with â¤ï¸ by BOLD è»½éŸ³**

Â© 2025 BOLD è»½éŸ³. All rights reserved.

[ ãƒã‚°å ±å‘Š](https://github.com/shuhei0720/keion-circle-site/issues/new) | [ğŸ’¡ æ©Ÿèƒ½ãƒªã‚¯ã‚¨ã‚¹ãƒˆ](https://github.com/shuhei0720/keion-circle-site/issues/new)

</div>

# 第12章：基本レイアウトとナビゲーション【ハンズオン】

> **この章では、サイト全体の骨格となるレイアウトとナビゲーションを完成させます**

## 🛠️ **ハンズオン作業**

**⚠️ 重要**: この章では実際に手を動かしてレイアウトを構築します。各セクションの指示に従って、ナビゲーションバー、フッター、ホームページを作成して、以下のコードを**すべて**入力してください：

## 📚 この章で学ぶこと

- ✅ ルートレイアウトの構造
- ✅ レスポンシブナビゲーションバーの実装
- ✅ モバイルメニューの作成
- ✅ フッターの実装
- ✅ ホームページの作成
- ✅ レイアウトのベストプラクティス

---

## 12.1 ルートレイアウトの理解

Next.js App Router では、`src/app/layout.tsx` がすべてのページで共通のレイアウトになります。

### ルートレイアウトの構造

```typescript
// src/app/layout.tsx の基本構造

export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <html lang="ja">
      <body>
        {/* 👇 すべてのページで共通の部分 */}
        <ナビゲーションバー />
        
        {/* 👇 各ページ固有の内容 */}
        <main>{children}</main>
        
        {/* 👇 すべてのページで共通の部分 */}
        <フッター />
      </body>
    </html>
  );
}
```

### レイアウトの階層構造

```
app/
├── layout.tsx          ← ルートレイアウト（全ページ共通）
├── page.tsx            ← ホームページ
│
├── posts/
│   ├── layout.tsx      ← 投稿セクションのレイアウト
│   ├── page.tsx        ← 投稿一覧
│   └── [id]/
│       └── page.tsx    ← 投稿詳細
│
└── events/
    └── page.tsx        ← イベント一覧
```

---

## 12.2 ナビゲーションバーの完全実装

### Step 1: ナビゲーションコンポーネントを作成

`src/components/Navbar.tsx` を開いてください（Chapter 11で作成したファイルを拡張します）。

```typescript
'use client';

import { useSession, signOut } from 'next-auth/react';
import Link from 'next/link';
import Image from 'next/image';
import { useState } from 'react';
import { Menu, X, Home, Calendar, Users, FileText } from 'lucide-react';

export function Navbar() {
  const { data: session, status } = useSession();
  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);
  const loading = status === 'loading';

  // モバイルメニューを閉じる
  const closeMobileMenu = () => setMobileMenuOpen(false);

  return (
    <nav className="bg-white shadow-md sticky top-0 z-50">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div className="flex justify-between h-16">
          {/* ロゴとデスクトップナビゲーション */}
          <div className="flex items-center gap-8">
            {/* ロゴ */}
            <Link 
              href="/" 
              className="flex items-center gap-2 text-xl font-bold text-gray-900 hover:text-blue-600 transition-colors"
            >
              <span className="text-2xl">🎸</span>
              <span>BOLD軽音</span>
            </Link>

            {/* デスクトップナビゲーション */}
            <div className="hidden md:flex items-center gap-6">
              <Link 
                href="/" 
                className="flex items-center gap-2 text-gray-700 hover:text-blue-600 transition-colors"
              >
                <Home size={18} />
                <span>ホーム</span>
              </Link>

              {session && (
                <>
                  <Link 
                    href="/posts" 
                    className="flex items-center gap-2 text-gray-700 hover:text-blue-600 transition-colors"
                  >
                    <FileText size={18} />
                    <span>活動報告</span>
                  </Link>
                  
                  <Link 
                    href="/events" 
                    className="flex items-center gap-2 text-gray-700 hover:text-blue-600 transition-colors"
                  >
                    <Calendar size={18} />
                    <span>イベント</span>
                  </Link>
                  
                  <Link 
                    href="/schedules" 
                    className="flex items-center gap-2 text-gray-700 hover:text-blue-600 transition-colors"
                  >
                    <Calendar size={18} />
                    <span>スケジュール</span>
                  </Link>
                  
                  <Link 
                    href="/users" 
                    className="flex items-center gap-2 text-gray-700 hover:text-blue-600 transition-colors"
                  >
                    <Users size={18} />
                    <span>メンバー</span>
                  </Link>
                </>
              )}
            </div>
          </div>

          {/* デスクトップ - ユーザーメニュー */}
          <div className="hidden md:flex items-center gap-4">
            {loading ? (
              <div className="text-gray-500 text-sm">読み込み中...</div>
            ) : session ? (
              <>
                {/* ユーザー情報 */}
                <Link 
                  href="/profile"
                  className="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-100 transition-colors"
                >
                  {session.user?.image ? (
                    <Image
                      src={session.user.image}
                      alt={session.user.name || ''}
                      width={36}
                      height={36}
                      className="rounded-full"
                    />
                  ) : (
                    <div className="w-9 h-9 rounded-full bg-blue-600 flex items-center justify-center text-white font-semibold">
                      {session.user?.name?.charAt(0) || 'U'}
                    </div>
                  )}
                  <div className="flex flex-col">
                    <span className="text-sm font-medium text-gray-900">
                      {session.user?.name}
                    </span>
                    {session.user?.role === 'admin' && (
                      <span className="text-xs text-blue-600 font-semibold">
                        管理者
                      </span>
                    )}
                  </div>
                </Link>

                {/* ログアウトボタン */}
                <button
                  onClick={() => signOut({ callbackUrl: '/auth/signin' })}
                  className="px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 transition-colors"
                >
                  ログアウト
                </button>
              </>
            ) : (
              <div className="flex items-center gap-3">
                <Link
                  href="/auth/signin"
                  className="px-4 py-2 text-sm font-medium text-gray-700 hover:text-gray-900 transition-colors"
                >
                  ログイン
                </Link>
                <Link
                  href="/auth/signup"
                  className="px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors"
                >
                  新規登録
                </Link>
              </div>
            )}
          </div>

          {/* モバイル - ハンバーガーメニューボタン */}
          <div className="md:hidden flex items-center">
            <button
              onClick={() => setMobileMenuOpen(!mobileMenuOpen)}
              className="p-2 rounded-lg text-gray-700 hover:bg-gray-100"
              aria-label="メニュー"
            >
              {mobileMenuOpen ? <X size={24} /> : <Menu size={24} />}
            </button>
          </div>
        </div>
      </div>

      {/* モバイルメニュー */}
      {mobileMenuOpen && (
        <div className="md:hidden border-t border-gray-200 bg-white">
          <div className="px-4 py-3 space-y-2">
            {/* ユーザー情報（ログイン時） */}
            {session && (
              <div className="pb-3 mb-3 border-b border-gray-200">
                <div className="flex items-center gap-3">
                  {session.user?.image ? (
                    <Image
                      src={session.user.image}
                      alt={session.user.name || ''}
                      width={40}
                      height={40}
                      className="rounded-full"
                    />
                  ) : (
                    <div className="w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center text-white font-semibold">
                      {session.user?.name?.charAt(0) || 'U'}
                    </div>
                  )}
                  <div>
                    <div className="font-medium text-gray-900">
                      {session.user?.name}
                    </div>
                    <div className="text-sm text-gray-500">
                      {session.user?.email}
                    </div>
                    {session.user?.role === 'admin' && (
                      <div className="text-xs text-blue-600 font-semibold mt-1">
                        管理者
                      </div>
                    )}
                  </div>
                </div>
              </div>
            )}

            {/* ナビゲーションリンク */}
            <Link
              href="/"
              onClick={closeMobileMenu}
              className="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-100"
            >
              <Home size={20} />
              <span>ホーム</span>
            </Link>

            {session && (
              <>
                <Link
                  href="/posts"
                  onClick={closeMobileMenu}
                  className="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-100"
                >
                  <FileText size={20} />
                  <span>活動報告</span>
                </Link>

                <Link
                  href="/events"
                  onClick={closeMobileMenu}
                  className="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-100"
                >
                  <Calendar size={20} />
                  <span>イベント</span>
                </Link>

                <Link
                  href="/schedules"
                  onClick={closeMobileMenu}
                  className="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-100"
                >
                  <Calendar size={20} />
                  <span>スケジュール</span>
                </Link>

                <Link
                  href="/users"
                  onClick={closeMobileMenu}
                  className="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-100"
                >
                  <Users size={20} />
                  <span>メンバー</span>
                </Link>

                <Link
                  href="/profile"
                  onClick={closeMobileMenu}
                  className="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-100"
                >
                  <Users size={20} />
                  <span>プロフィール</span>
                </Link>
              </>
            )}

            {/* ログイン/ログアウトボタン */}
            {loading ? (
              <div className="px-3 py-2 text-gray-500 text-sm">
                読み込み中...
              </div>
            ) : session ? (
              <button
                onClick={() => {
                  closeMobileMenu();
                  signOut({ callbackUrl: '/auth/signin' });
                }}
                className="w-full px-3 py-2 text-left text-white bg-red-600 rounded-lg hover:bg-red-700"
              >
                ログアウト
              </button>
            ) : (
              <div className="space-y-2 pt-2">
                <Link
                  href="/auth/signin"
                  onClick={closeMobileMenu}
                  className="block w-full px-3 py-2 text-center text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50"
                >
                  ログイン
                </Link>
                <Link
                  href="/auth/signup"
                  onClick={closeMobileMenu}
                  className="block w-full px-3 py-2 text-center text-white bg-blue-600 rounded-lg hover:bg-blue-700"
                >
                  新規登録
                </Link>
              </div>
            )}
          </div>
        </div>
      )}
    </nav>
  );
}
```

**このナビゲーションバーの特徴:**

1. ✅ **レスポンシブ**: デスクトップとモバイルで異なる表示
2. ✅ **Sticky**: スクロールしても上部に固定
3. ✅ **アイコン**: Lucide Reactのアイコンを使用
4. ✅ **条件分岐**: ログイン状態で表示を切り替え
5. ✅ **モバイルメニュー**: ハンバーガーメニューで開閉
6. ✅ **管理者表示**: 管理者バッジを表示

---

## 12.3 フッターの実装

### Step 1: フッターコンポーネントを作成

`src/components/Footer.tsx` を作成して、以下のコードを**すべて**入力してください：

```typescript
import Link from 'next/link';
import { Github, Twitter, Mail } from 'lucide-react';

export function Footer() {
  const currentYear = new Date().getFullYear();

  return (
    <footer className="bg-gray-900 text-gray-300">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        <div className="grid grid-cols-1 md:grid-cols-4 gap-8">
          {/* サイト情報 */}
          <div className="col-span-1 md:col-span-2">
            <div className="flex items-center gap-2 mb-4">
              <span className="text-3xl">🎸</span>
              <span className="text-xl font-bold text-white">BOLD軽音</span>
            </div>
            <p className="text-sm text-gray-400 mb-4">
              大学軽音楽サークルBOLDのメンバー専用サイトです。
              活動報告や活動スケジュール、イベント管理を行っています。
            </p>
            <div className="flex gap-4">
              <a
                href="https://github.com"
                target="_blank"
                rel="noopener noreferrer"
                className="text-gray-400 hover:text-white transition-colors"
                aria-label="GitHub"
              >
                <Github size={20} />
              </a>
              <a
                href="https://twitter.com"
                target="_blank"
                rel="noopener noreferrer"
                className="text-gray-400 hover:text-white transition-colors"
                aria-label="Twitter"
              >
                <Twitter size={20} />
              </a>
              <a
                href="mailto:info@example.com"
                className="text-gray-400 hover:text-white transition-colors"
                aria-label="Email"
              >
                <Mail size={20} />
              </a>
            </div>
          </div>

          {/* ナビゲーション */}
          <div>
            <h3 className="text-white font-semibold mb-4">メニュー</h3>
            <ul className="space-y-2 text-sm">
              <li>
                <Link href="/" className="hover:text-white transition-colors">
                  ホーム
                </Link>
              </li>
              <li>
                <Link href="/posts" className="hover:text-white transition-colors">
                  活動報告
                </Link>
              </li>
              <li>
                <Link href="/events" className="hover:text-white transition-colors">
                  イベント
                </Link>
              </li>
              <li>
                <Link href="/schedules" className="hover:text-white transition-colors">
                  スケジュール
                </Link>
              </li>
              <li>
                <Link href="/users" className="hover:text-white transition-colors">
                  メンバー
                </Link>
              </li>
            </ul>
          </div>

          {/* サポート */}
          <div>
            <h3 className="text-white font-semibold mb-4">サポート</h3>
            <ul className="space-y-2 text-sm">
              <li>
                <Link href="/about" className="hover:text-white transition-colors">
                  サークルについて
                </Link>
              </li>
              <li>
                <Link href="/contact" className="hover:text-white transition-colors">
                  お問い合わせ
                </Link>
              </li>
              <li>
                <Link href="/privacy" className="hover:text-white transition-colors">
                  プライバシーポリシー
                </Link>
              </li>
              <li>
                <Link href="/terms" className="hover:text-white transition-colors">
                  利用規約
                </Link>
              </li>
            </ul>
          </div>
        </div>

        {/* コピーライト */}
        <div className="mt-8 pt-8 border-t border-gray-800 text-center text-sm text-gray-400">
          <p>© {currentYear} BOLD軽音. All rights reserved.</p>
        </div>
      </div>
    </footer>
  );
}
```

**フッターの特徴:**

1. ✅ **4カラムレイアウト**: モバイルでは1カラムに変更
2. ✅ **SNSリンク**: GitHub, Twitter, Email
3. ✅ **ナビゲーション**: 主要ページへのリンク
4. ✅ **年自動更新**: `new Date().getFullYear()`
5. ✅ **ダークテーマ**: グレー系の配色

---

## 12.4 ルートレイアウトの完成

### Step 1: レイアウトファイルを更新

`src/app/layout.tsx` を開いて、完全版に更新してください。

```typescript
import type { Metadata } from 'next';
import { SessionProvider } from 'next-auth/react';
import { Navbar } from '@/components/Navbar';
import { Footer } from '@/components/Footer';
import './globals.css';

export const metadata: Metadata = {
  title: {
    default: 'BOLD軽音メンバーサイト',
    template: '%s | BOLD軽音',
  },
  description: '大学軽音楽サークルBOLDのメンバー専用サイト。活動報告、活動スケジュール、イベント管理。',
  keywords: ['軽音楽', 'バンド', 'サークル', 'BOLD', '大学'],
  authors: [{ name: 'BOLD軽音' }],
  openGraph: {
    type: 'website',
    locale: 'ja_JP',
    siteName: 'BOLD軽音メンバーサイト',
    title: 'BOLD軽音メンバーサイト',
    description: '大学軽音楽サークルBOLDのメンバー専用サイト',
  },
};

export default function RootLayout({
  children,
}: {
  children: React.NodeNode;
}) {
  return (
    <html lang="ja">
      <body className="flex flex-col min-h-screen bg-gray-50">
        <SessionProvider>
          {/* ナビゲーションバー */}
          <Navbar />
          
          {/* メインコンテンツ */}
          <main className="flex-1">
            {children}
          </main>
          
          {/* フッター */}
          <Footer />
        </SessionProvider>
      </body>
    </html>
  );
}
```

**レイアウトの構造:**

```
<body> (min-h-screen: 最小高さ100vh)
  ├── <Navbar />           ← 固定ヘッダー
  ├── <main> (flex-1)      ← メインコンテンツ（可変）
  └── <Footer />           ← フッター
```

### Step 2: グローバルスタイルの確認

`src/app/globals.css` を開いて、以下のコードを**すべて**入力してください：

以下が含まれていることを確認してください。

```css
@tailwind base;
@tailwind components;
@tailwind utilities;

/* スクロールバーのスタイル（オプション） */
@layer utilities {
  .scrollbar-thin::-webkit-scrollbar {
    width: 8px;
  }
  
  .scrollbar-thin::-webkit-scrollbar-track {
    background: #f1f1f1;
  }
  
  .scrollbar-thin::-webkit-scrollbar-thumb {
    background: #888;
    border-radius: 4px;
  }
  
  .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    background: #555;
  }
}
```

---

## 12.5 ホームページの実装

### Step 1: ホームページを作成

`src/app/page.tsx` を開いて、以下のコードを**すべて**入力してください：

以下の内容に更新してください。

```typescript
import { auth } from '@/lib/auth';
import Link from 'next/link';
import { FileText, Calendar, Users, TrendingUp } from 'lucide-react';

export default async function HomePage() {
  const session = await auth();

  return (
    <div className="min-h-screen">
      {/* ヒーローセクション */}
      <section className="bg-gradient-to-r from-blue-600 to-blue-800 text-white py-20">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="text-center">
            <h1 className="text-5xl font-bold mb-6">
              🎸 BOLD軽音メンバーサイト
            </h1>
            <p className="text-xl mb-8 text-blue-100">
              活動報告、活動スケジュール、イベント管理を一元管理
            </p>
            {!session ? (
              <div className="flex gap-4 justify-center">
                <Link
                  href="/auth/signup"
                  className="px-8 py-3 bg-white text-blue-600 rounded-lg font-semibold hover:bg-gray-100 transition-colors"
                >
                  新規登録
                </Link>
                <Link
                  href="/auth/signin"
                  className="px-8 py-3 bg-blue-700 text-white rounded-lg font-semibold hover:bg-blue-800 transition-colors"
                >
                  ログイン
                </Link>
              </div>
            ) : (
              <div className="text-center">
                <p className="text-xl mb-4">
                  ようこそ、<span className="font-bold">{session.user?.name}</span>さん！
                </p>
                <Link
                  href="/posts"
                  className="inline-block px-8 py-3 bg-white text-blue-600 rounded-lg font-semibold hover:bg-gray-100 transition-colors"
                >
                  活動報告を見る
                </Link>
              </div>
            )}
          </div>
        </div>
      </section>

      {/* 機能紹介セクション */}
      <section className="py-16 bg-white">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <h2 className="text-3xl font-bold text-center mb-12 text-gray-900">
            主な機能
          </h2>
          
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
            {/* 活動報告 */}
            <div className="text-center p-6 rounded-lg border border-gray-200 hover:shadow-lg transition-shadow">
              <div className="inline-flex items-center justify-center w-16 h-16 bg-blue-100 text-blue-600 rounded-full mb-4">
                <FileText size={32} />
              </div>
              <h3 className="text-xl font-semibold mb-2 text-gray-900">
                活動報告
              </h3>
              <p className="text-gray-600">
                練習やライブの様子を写真や動画で共有
              </p>
            </div>

            {/* イベント管理 */}
            <div className="text-center p-6 rounded-lg border border-gray-200 hover:shadow-lg transition-shadow">
              <div className="inline-flex items-center justify-center w-16 h-16 bg-green-100 text-green-600 rounded-full mb-4">
                <Calendar size={32} />
              </div>
              <h3 className="text-xl font-semibold mb-2 text-gray-900">
                イベント管理
              </h3>
              <p className="text-gray-600">
                ライブや合宿などのイベントを一元管理
              </p>
            </div>

            {/* 活動スケジュール */}
            <div className="text-center p-6 rounded-lg border border-gray-200 hover:shadow-lg transition-shadow">
              <div className="inline-flex items-center justify-center w-16 h-16 bg-purple-100 text-purple-600 rounded-full mb-4">
                <TrendingUp size={32} />
              </div>
              <h3 className="text-xl font-semibold mb-2 text-gray-900">
                活動スケジュール
              </h3>
              <p className="text-gray-600">
                練習やミーティングの予定を管理
              </p>
            </div>

            {/* メンバー管理 */}
            <div className="text-center p-6 rounded-lg border border-gray-200 hover:shadow-lg transition-shadow">
              <div className="inline-flex items-center justify-center w-16 h-16 bg-orange-100 text-orange-600 rounded-full mb-4">
                <Users size={32} />
              </div>
              <h3 className="text-xl font-semibold mb-2 text-gray-900">
                メンバー管理
              </h3>
              <p className="text-gray-600">
                メンバーのプロフィールと担当楽器
              </p>
            </div>
          </div>
        </div>
      </section>

      {/* CTAセクション */}
      {!session && (
        <section className="py-16 bg-gray-100">
          <div className="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h2 className="text-3xl font-bold mb-4 text-gray-900">
              今すぐ参加しよう
            </h2>
            <p className="text-lg text-gray-600 mb-8">
              BOLD軽音のメンバーとして活動を始めましょう
            </p>
            <Link
              href="/auth/signup"
              className="inline-block px-8 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors"
            >
              無料で新規登録
            </Link>
          </div>
        </section>
      )}
    </div>
  );
}
```

**ホームページの構成:**

1. **ヒーローセクション**: サイトのタイトルとCTA
2. **機能紹介**: 4つの主要機能をカード形式で表示
3. **CTAセクション**: ログインしていない場合のみ表示

---

## 12.6 動作確認

### Step 1: 開発サーバーを起動

```bash
npm run dev
```

### Step 2: ブラウザで確認

**1. ログアウト状態で確認:**

http://localhost:3000 を開いて、以下のコードを**すべて**入力してください：

以下のコードで**上書き**してください：

✅ ナビゲーションバーに「ログイン」「新規登録」ボタンが表示される
✅ ヒーローセクションが表示される
✅ 機能紹介セクションが表示される
✅ CTAセクション（新規登録）が表示される
✅ フッターが表示される

**2. ログイン状態で確認:**

ログインしてから http://localhost:3000 を開いて、以下のコードを**すべて**入力してください：

以下のコードで**上書き**してください：

✅ ナビゲーションバーにユーザー名とアバターが表示される
✅ 「活動報告」「イベント」等のリンクが表示される
✅ ヒーローセクションに「ようこそ、〇〇さん！」と表示される
✅ CTAセクションが表示されない

**3. モバイル表示を確認:**

ブラウザの開発者ツール（F12）を開き、デバイスモードに切り替えてください。

✅ ハンバーガーメニューが表示される
✅ メニューをタップすると開閉する
✅ レイアウトが崩れていない

### Step 3: レスポンシブ確認

ブラウザのウィンドウ幅を変更して、以下のブレークポイントで確認：

| 幅 | 表示 |
|----|------|
| 1024px以上 | デスクトップレイアウト |
| 768px〜1023px | タブレットレイアウト |
| 767px以下 | モバイルレイアウト |

---

## 12.7 共通コンポーネントの作成

### Button コンポーネント

`src/components/ui/Button.tsx` を作成して、以下のコードを**すべて**入力してください：

```typescript
import { ButtonHTMLAttributes, forwardRef } from 'react';
import { Loader2 } from 'lucide-react';

interface ButtonProps extends ButtonHTMLAttributes<HTMLButtonElement> {
  variant?: 'primary' | 'secondary' | 'danger' | 'outline';
  size?: 'sm' | 'md' | 'lg';
  loading?: boolean;
  fullWidth?: boolean;
}

export const Button = forwardRef<HTMLButtonElement, ButtonProps>(
  (
    {
      variant = 'primary',
      size = 'md',
      loading = false,
      fullWidth = false,
      disabled,
      children,
      className = '',
      ...props
    },
    ref
  ) => {
    // ベーススタイル
    const baseStyles = 'inline-flex items-center justify-center gap-2 font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed';

    // バリアントスタイル
    const variantStyles = {
      primary: 'bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500',
      secondary: 'bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500',
      danger: 'bg-red-600 text-white hover:bg-red-700 focus:ring-red-500',
      outline: 'border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-blue-500',
    };

    // サイズスタイル
    const sizeStyles = {
      sm: 'px-3 py-1.5 text-sm',
      md: 'px-4 py-2 text-base',
      lg: 'px-6 py-3 text-lg',
    };

    const widthStyle = fullWidth ? 'w-full' : '';

    return (
      <button
        ref={ref}
        disabled={disabled || loading}
        className={`${baseStyles} ${variantStyles[variant]} ${sizeStyles[size]} ${widthStyle} ${className}`}
        {...props}
      >
        {loading && <Loader2 size={18} className="animate-spin" />}
        {children}
      </button>
    );
  }
);

Button.displayName = 'Button';
```

**使用例:**

```typescript
import { Button } from '@/components/ui/Button';

// プライマリーボタン
<Button variant="primary">保存</Button>

// ローディング状態
<Button loading>送信中...</Button>

// 全幅
<Button fullWidth>ログイン</Button>

// サイズ変更
<Button size="sm">小</Button>
<Button size="lg">大</Button>
```

### Card コンポーネント

`src/components/ui/Card.tsx` を作成して、以下のコードを**すべて**入力してください：

```typescript
import { HTMLAttributes, forwardRef } from 'react';

interface CardProps extends HTMLAttributes<HTMLDivElement> {
  hover?: boolean;
}

export const Card = forwardRef<HTMLDivElement, CardProps>(
  ({ hover = false, className = '', children, ...props }, ref) => {
    const hoverStyles = hover ? 'hover:shadow-lg transition-shadow' : '';
    
    return (
      <div
        ref={ref}
        className={`bg-white rounded-lg border border-gray-200 shadow-sm ${hoverStyles} ${className}`}
        {...props}
      >
        {children}
      </div>
    );
  }
);

Card.displayName = 'Card';

export const CardHeader = forwardRef<HTMLDivElement, HTMLAttributes<HTMLDivElement>>(
  ({ className = '', children, ...props }, ref) => {
    return (
      <div
        ref={ref}
        className={`px-6 py-4 border-b border-gray-200 ${className}`}
        {...props}
      >
        {children}
      </div>
    );
  }
);

CardHeader.displayName = 'CardHeader';

export const CardBody = forwardRef<HTMLDivElement, HTMLAttributes<HTMLDivElement>>(
  ({ className = '', children, ...props }, ref) => {
    return (
      <div
        ref={ref}
        className={`px-6 py-4 ${className}`}
        {...props}
      >
        {children}
      </div>
    );
  }
);

CardBody.displayName = 'CardBody';

export const CardFooter = forwardRef<HTMLDivElement, HTMLAttributes<HTMLDivElement>>(
  ({ className = '', children, ...props }, ref) => {
    return (
      <div
        ref={ref}
        className={`px-6 py-4 border-t border-gray-200 ${className}`}
        {...props}
      >
        {children}
      </div>
    );
  }
);

CardFooter.displayName = 'CardFooter';
```

**使用例:**

```typescript
import { Card, CardHeader, CardBody, CardFooter } from '@/components/ui/Card';
import { Button } from '@/components/ui/Button';

<Card hover>
  <CardHeader>
    <h2 className="text-xl font-semibold">タイトル</h2>
  </CardHeader>
  <CardBody>
    <p>コンテンツ</p>
  </CardBody>
  <CardFooter>
    <Button>詳細を見る</Button>
  </CardFooter>
</Card>
```

---

## 12.8 確認チェックリスト

Chapter 12の内容を理解できたか確認しましょう。

### レイアウトの理解

- [ ] ルートレイアウトの役割を理解した
- [ ] レイアウトの階層構造を理解した
- [ ] `children` プロパティの意味を理解した

### ナビゲーションバーの実装

- [ ] レスポンシブナビゲーションを実装できる
- [ ] モバイルメニューを実装できる
- [ ] ログイン状態で表示を切り替えられる
- [ ] Lucide Reactアイコンを使える

### フッターの実装

- [ ] フッターコンポーネントを作成できる
- [ ] グリッドレイアウトを理解した
- [ ] レスポンシブデザインを適用できる

### ホームページの実装

- [ ] セクションごとに分けてデザインできる
- [ ] ヒーローセクションを作成できる
- [ ] CTAボタンを配置できる
- [ ] 条件分岐で表示を切り替えられる

### 共通コンポーネント

- [ ] Buttonコンポーネントを作成できる
- [ ] variantでスタイルを切り替えられる
- [ ] Cardコンポーネントを作成できる
- [ ] forwardRefの使い方を理解した

---

## まとめ

この章では、サイト全体の骨格となるレイアウトとナビゲーションを実装しました。

### 🎓 この章で学んだこと

#### レイアウトシステム
- ✅ ルートレイアウトの構造
- ✅ ナビゲーションバーの実装
- ✅ フッターの実装
- ✅ レスポンシブデザイン

#### ナビゲーション
- ✅ デスクトップナビゲーション
- ✅ モバイルメニュー（ハンバーガー）
- ✅ ログイン状態による表示切り替え
- ✅ Sticky ヘッダー

#### ホームページ
- ✅ ヒーローセクション
- ✅ 機能紹介セクション
- ✅ CTAセクション
- ✅ グラデーション背景

#### 共通コンポーネント
- ✅ Button コンポーネント
- ✅ Card コンポーネント
- ✅ 再利用可能な設計

### 🚀 次の章への準備

次の章（Chapter 13: 投稿機能の実装）では、以下を学びます：

1. **投稿一覧ページ**
   - データフェッチング
   - カード表示
   - ページネーション

2. **投稿作成機能**
   - フォーム実装
   - API作成
   - 画像アップロード

3. **投稿詳細ページ**
   - 詳細表示
   - YouTube埋め込み
   - いいね・コメント

**準備すること:**
- ✅ レイアウトが正しく表示されることを確認
- ✅ モバイル表示を確認
- ✅ 管理者ユーザーでログインできることを確認

### 💡 重要なポイント

1. **レスポンシブ第一**: モバイルから設計する
2. **再利用性**: 共通コンポーネントを作成
3. **条件分岐**: ログイン状態で表示を切り替え
4. **Sticky ナビゲーション**: スクロールしても固定
5. **アクセシビリティ**: aria-label等を適切に設定

---

[← 前の章：第11章 認証システムの実装](11-認証システムの実装.md) | [目次に戻る](00-目次.md) | [次の章へ：第13章 投稿機能の実装 →](13-投稿機能の実装.md)

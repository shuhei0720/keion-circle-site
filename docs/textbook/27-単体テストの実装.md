# ç¬¬27ç« ï¼šå˜ä½“ãƒ†ã‚¹ãƒˆã®å®Ÿè£…ã€ãƒãƒ³ã‚ºã‚ªãƒ³ã€‘

> **ã“ã®ç« ã§ã¯ã€å®Ÿéš›ã«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®é–¢æ•°ã¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å˜ä½“ãƒ†ã‚¹ãƒˆã‚’æ›¸ãã¾ã™**

## ğŸ› ï¸ **ãƒãƒ³ã‚ºã‚ªãƒ³ä½œæ¥­**

**âš ï¸ é‡è¦**: ã“ã®ç« ã§ã¯å®Ÿéš›ã«æ‰‹ã‚’å‹•ã‹ã—ã¦ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã¾ã™ã€‚å„ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®æŒ‡ç¤ºã«å¾“ã£ã¦ã€ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¦ã€ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã‚’**ã™ã¹ã¦**å…¥åŠ›ã—ã¦ãã ã•ã„ï¼š

> ğŸ’¡ **å‰æ**: ç¬¬26ç« ã€Œãƒ†ã‚¹ãƒˆç’°å¢ƒã®åŸºç¤ã€ã§Jestã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãŒå®Œäº†ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

## ğŸ“š ã“ã®ç« ã§å­¦ã¶ã“ã¨

- âœ… ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°ã®ãƒ†ã‚¹ãƒˆ
- âœ… Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ†ã‚¹ãƒˆ
- âœ… ãƒ¢ãƒƒã‚¯ã®ä½¿ã„æ–¹
- âœ… ã‚«ãƒãƒ¬ãƒƒã‚¸ã®ç¢ºèª

---

## 27.1 ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ

### Step 1: ãƒ†ã‚¹ãƒˆç”¨ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ä»¥ä¸‹ã®æ§‹é€ ã§ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¦ã„ãã¾ã™ï¼š

```
src/
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ utils.ts
â”‚   â””â”€â”€ __tests__/
â”‚       â””â”€â”€ utils.test.ts          â† ä½œæˆ
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ LikeButton.tsx
â”‚   â””â”€â”€ __tests__/
â”‚       â””â”€â”€ LikeButton.test.tsx    â† ä½œæˆ
```

---

## 27.2 ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°ã®ãƒ†ã‚¹ãƒˆ

### Step 2: `src/lib/__tests__` ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œæˆ

ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œï¼š

```bash
mkdir -p src/lib/__tests__
```

### Step 3: `src/lib/__tests__/utils.test.ts` ã‚’ä½œæˆã—ã¦ã€ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã‚’**ã™ã¹ã¦**å…¥åŠ›ã—ã¦ãã ã•ã„ï¼š

```typescript
import { formatDate, truncateText, getYouTubeId, validateEmail } from '../utils';

describe('formatDate', () => {
  it('Dateã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ YYYY-MM-DD å½¢å¼ã«ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ', () => {
    const date = new Date('2025-12-28T10:00:00Z');
    expect(formatDate(date)).toBe('2025-12-28');
  });

  it('æ–‡å­—åˆ—ã®æ—¥ä»˜ã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ', () => {
    expect(formatDate('2025-12-28')).toBe('2025-12-28');
  });

  it('nullã®å ´åˆã¯ç©ºæ–‡å­—ã‚’è¿”ã™', () => {
    expect(formatDate(null)).toBe('');
  });

  it('ä¸æ­£ãªæ—¥ä»˜ã¯ç©ºæ–‡å­—ã‚’è¿”ã™', () => {
    const result = formatDate('invalid-date');
    expect(result).toBe('');
  });
});

describe('truncateText', () => {
  it('é•·ã„ãƒ†ã‚­ã‚¹ãƒˆã‚’åˆ‡ã‚Šè©°ã‚ã‚‹', () => {
    const text = 'ã“ã‚Œã¯ã¨ã¦ã‚‚é•·ã„ãƒ†ã‚­ã‚¹ãƒˆã§ã™';
    expect(truncateText(text, 10)).toBe('ã“ã‚Œã¯ã¨ã¦ã‚‚é•·ã„...');
  });

  it('çŸ­ã„ãƒ†ã‚­ã‚¹ãƒˆã¯ãã®ã¾ã¾è¿”ã™', () => {
    expect(truncateText('çŸ­ã„', 10)).toBe('çŸ­ã„');
  });

  it('ç©ºæ–‡å­—ã®å ´åˆ', () => {
    expect(truncateText('', 10)).toBe('');
  });

  it('æœ€å¤§é•·ã¨åŒã˜å ´åˆã¯...ã‚’ä»˜ã‘ãªã„', () => {
    expect(truncateText('1234567890', 10)).toBe('1234567890');
  });
});

describe('getYouTubeId', () => {
  it('watch URLã‹ã‚‰IDã‚’æŠ½å‡º', () => {
    const url = 'https://www.youtube.com/watch?v=dQw4w9WgXcQ';
    expect(getYouTubeId(url)).toBe('dQw4w9WgXcQ');
  });

  it('çŸ­ç¸®URLã‹ã‚‰IDã‚’æŠ½å‡º', () => {
    const url = 'https://youtu.be/dQw4w9WgXcQ';
    expect(getYouTubeId(url)).toBe('dQw4w9WgXcQ');
  });

  it('embed URLã‹ã‚‰IDã‚’æŠ½å‡º', () => {
    const url = 'https://www.youtube.com/embed/dQw4w9WgXcQ';
    expect(getYouTubeId(url)).toBe('dQw4w9WgXcQ');
  });

  it('shorts URLã‹ã‚‰IDã‚’æŠ½å‡º', () => {
    const url = 'https://www.youtube.com/shorts/dQw4w9WgXcQ';
    expect(getYouTubeId(url)).toBe('dQw4w9WgXcQ');
  });

  it('ä¸æ­£ãªURLã®å ´åˆã¯null', () => {
    expect(getYouTubeId('https://example.com')).toBeNull();
  });

  it('è¤‡æ•°ã®URLé…åˆ—ã‹ã‚‰å„IDã‚’æŠ½å‡º', () => {
    const urls = [
      'https://www.youtube.com/watch?v=abc123',
      'https://youtu.be/def456',
      'https://www.youtube.com/embed/ghi789'
    ];
    const ids = urls.map(url => getYouTubeId(url)).filter(id => id !== null);
    expect(ids).toEqual(['abc123', 'def456', 'ghi789']);
  });

  it('è¤‡æ•°URLé…åˆ—ã«ä¸æ­£ãªURLãŒæ··ã–ã£ã¦ã„ã¦ã‚‚æ­£ã—ã„IDã ã‘æŠ½å‡º', () => {
    const urls = [
      'https://www.youtube.com/watch?v=valid123',
      'https://invalid.com/notayoutube',
      'https://youtu.be/valid456',
    ];
    const ids = urls.map(url => getYouTubeId(url)).filter(id => id !== null);
    expect(ids).toEqual(['valid123', 'valid456']);
  });
});

describe('validateEmail', () => {
  it('æ­£ã—ã„ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹', () => {
    expect(validateEmail('user@example.com')).toBe(true);
  });

  it('@ãŒãªã„å ´åˆã¯false', () => {
    expect(validateEmail('userexample.com')).toBe(false);
  });

  it('ãƒ‰ãƒ¡ã‚¤ãƒ³ãŒãªã„å ´åˆã¯false', () => {
    expect(validateEmail('user@')).toBe(false);
  });

  it('ç©ºæ–‡å­—ã®å ´åˆã¯false', () => {
    expect(validateEmail('')).toBe(false);
  });

  it('ã‚¹ãƒšãƒ¼ã‚¹ã‚’å«ã‚€å ´åˆã¯false', () => {
    expect(validateEmail('user @example.com')).toBe(false);
  });
});
```

### Step 4: ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ

```bash
npm test
```

**æœŸå¾…ã•ã‚Œã‚‹çµæœ:**

```
 PASS  src/lib/__tests__/utils.test.ts
  formatDate
    âœ“ Dateã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ YYYY-MM-DD å½¢å¼ã«ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ (3 ms)
    âœ“ æ–‡å­—åˆ—ã®æ—¥ä»˜ã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ (1 ms)
    âœ“ nullã®å ´åˆã¯ç©ºæ–‡å­—ã‚’è¿”ã™
    âœ“ ä¸æ­£ãªæ—¥ä»˜ã¯ç©ºæ–‡å­—ã‚’è¿”ã™ (1 ms)
  truncateText
    âœ“ é•·ã„ãƒ†ã‚­ã‚¹ãƒˆã‚’åˆ‡ã‚Šè©°ã‚ã‚‹ (1 ms)
    âœ“ çŸ­ã„ãƒ†ã‚­ã‚¹ãƒˆã¯ãã®ã¾ã¾è¿”ã™
    ...

Tests: 17 passed, 17 total
```

---

## 27.3 Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ†ã‚¹ãƒˆ

### Step 5: `src/components/__tests__` ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œæˆ

```bash
mkdir -p src/components/__tests__
```

### Step 6: `src/components/__tests__/LikeButton.test.tsx` ã‚’ä½œæˆã—ã¦ã€ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã‚’**ã™ã¹ã¦**å…¥åŠ›ã—ã¦ãã ã•ã„ï¼š

```typescript
import { render, screen, fireEvent, waitFor } from '@testing-library/react';
import { LikeButton } from '../LikeButton';

// fetch APIã‚’ãƒ¢ãƒƒã‚¯
global.fetch = jest.fn();

describe('LikeButton', () => {
  beforeEach(() => {
    // å„ãƒ†ã‚¹ãƒˆå‰ã«ãƒ¢ãƒƒã‚¯ã‚’ãƒªã‚»ãƒƒãƒˆ
    (global.fetch as jest.Mock).mockReset();
  });

  it('åˆæœŸçŠ¶æ…‹ã§ã€Œã„ã„ã­ã€ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹', () => {
    render(<LikeButton postId="1" initialLiked={false} initialCount={0} />);
    
    const button = screen.getByRole('button');
    expect(button).toBeInTheDocument();
    expect(button).toHaveTextContent('0');
  });

  it('æ—¢ã«ã„ã„ã­æ¸ˆã¿ã®å ´åˆã€ãƒãƒ¼ãƒˆãŒå¡—ã‚Šã¤ã¶ã•ã‚Œã‚‹', () => {
    render(<LikeButton postId="1" initialLiked={true} initialCount={5} />);
    
    const button = screen.getByRole('button');
    expect(button).toHaveTextContent('5');
    // SVGã®fillãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã§ç¢ºèªï¼ˆå®Ÿè£…ã«å¿œã˜ã¦èª¿æ•´ï¼‰
  });

  it('ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã„ã„ã­ãŒè¿½åŠ ã•ã‚Œã‚‹', async () => {
    (global.fetch as jest.Mock).mockResolvedValueOnce({
      ok: true,
      json: async () => ({ liked: true, count: 1 }),
    });

    render(<LikeButton postId="1" initialLiked={false} initialCount={0} />);
    
    const button = screen.getByRole('button');
    fireEvent.click(button);

    // æ¥½è¦³çš„UIã§å³åº§ã«æ›´æ–°ã•ã‚Œã‚‹
    expect(button).toHaveTextContent('1');

    // APIãŒå‘¼ã°ã‚ŒãŸã“ã¨ã‚’ç¢ºèª
    await waitFor(() => {
      expect(global.fetch).toHaveBeenCalledWith(
        '/api/posts/1/like',
        expect.objectContaining({
          method: 'POST',
        })
      );
    });
  });

  it('ã„ã„ã­æ¸ˆã¿ã®ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã„ã„ã­ãŒè§£é™¤ã•ã‚Œã‚‹', async () => {
    (global.fetch as jest.Mock).mockResolvedValueOnce({
      ok: true,
      json: async () => ({ liked: false, count: 0 }),
    });

    render(<LikeButton postId="1" initialLiked={true} initialCount=1} />);
    
    const button = screen.getByRole('button');
    fireEvent.click(button);

    // æ¥½è¦³çš„UIã§å³åº§ã«æ›´æ–°ã•ã‚Œã‚‹
    expect(button).toHaveTextContent('0');

    await waitFor(() => {
      expect(global.fetch).toHaveBeenCalledWith(
        '/api/posts/1/unlike',
        expect.objectContaining({
          method: 'POST',
        })
      );
    });
  });

  it('APIã‚¨ãƒ©ãƒ¼æ™‚ã¯å…ƒã®çŠ¶æ…‹ã«æˆ»ã‚‹', async () => {
    (global.fetch as jest.Mock).mockRejectedValueOnce(new Error('API Error'));

    render(<LikeButton postId="1" initialLiked={false} initialCount={0} />);
    
    const button = screen.getByRole('button');
    fireEvent.click(button);

    // ä¸€åº¦ã¯å¢—ãˆã‚‹ï¼ˆæ¥½è¦³çš„UIï¼‰
    expect(button).toHaveTextContent('1');

    // ã‚¨ãƒ©ãƒ¼å¾Œã¯å…ƒã«æˆ»ã‚‹
    await waitFor(() => {
      expect(button).toHaveTextContent('0');
    });
  });
});
```

### Step 7: ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ

```bash
npm test
```

---

## 27.4 ã‚«ãƒãƒ¬ãƒƒã‚¸ã®ç¢ºèª

### Step 8: ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆã‚’ç”Ÿæˆ

```bash
npm run test:coverage
```

**å‡ºåŠ›ä¾‹:**

```
 PASS  src/lib/__tests__/utils.test.ts
 PASS  src/components/__tests__/LikeButton.test.tsx

-------------------|---------|----------|---------|---------|
File               | % Stmts | % Branch | % Funcs | % Lines |
-------------------|---------|----------|---------|---------|
All files          |   85.23 |    78.45 |   88.12 |   86.34 |
 lib/utils.ts      |   95.12 |    90.23 |   100   |   94.87 |
 components/       |   78.45 |    65.34 |   80.12 |   79.23 |
-------------------|---------|----------|---------|---------|
```

### ã‚«ãƒãƒ¬ãƒƒã‚¸ãŒä½ã„å ´åˆ

**ã©ã®è¡ŒãŒãƒ†ã‚¹ãƒˆã•ã‚Œã¦ã„ãªã„ã‹ç¢ºèª:**

```bash
# coverage/lcov-report/index.html ã‚’é–‹ã
open coverage/lcov-report/index.html
```

---

## 27.5 ãã®ä»–ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ†ã‚¹ãƒˆ

### Step 9: YouTubeEmbedã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ†ã‚¹ãƒˆ

`src/components/__tests__/YouTubeEmbed.test.tsx` ã‚’ä½œæˆã—ã¦ã€ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã‚’**ã™ã¹ã¦**å…¥åŠ›ã—ã¦ãã ã•ã„ï¼š

```typescript
import { render, screen } from '@testing-library/react';
import { YouTubeEmbed } from '../YouTubeEmbed';

describe('YouTubeEmbed', () => {
  it('YouTubeå‹•ç”»ã®iframeãŒè¡¨ç¤ºã•ã‚Œã‚‹', () => {
    render(<YouTubeEmbed url="https://www.youtube.com/watch?v=dQw4w9WgXcQ" />);
    
    const iframe = screen.getByTitle('YouTube video player');
    expect(iframe).toBeInTheDocument();
    expect(iframe).toHaveAttribute('src', expect.stringContaining('dQw4w9WgXcQ'));
  });

  it('ä¸æ­£ãªURLã®å ´åˆã¯ä½•ã‚‚è¡¨ç¤ºã—ãªã„', () => {
    const { container } = render(<YouTubeEmbed url="https://example.com" />);
    
    const iframe = container.querySelector('iframe');
    expect(iframe).toBeNull();
  });

  it('çŸ­ç¸®URLã§ã‚‚æ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹', () => {
    render(<YouTubeEmbed url="https://youtu.be/dQw4w9WgXcQ" />);
    
    const iframe = screen.getByTitle('YouTube video player');
    expect(iframe).toHaveAttribute('src', expect.stringContaining('dQw4w9WgXcQ'));
  });
});
```

---

## 27.6 ã¾ã¨ã‚

ã“ã®ç« ã§å®Ÿè£…ã—ãŸãƒ†ã‚¹ãƒˆï¼š

1. **ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°**: formatDate, truncateText, getYouTubeId, validateEmail
2. **Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**: LikeButton, YouTubeEmbed
3. **ãƒ¢ãƒƒã‚¯ã®ä½¿ç”¨**: fetch APIã®ãƒ¢ãƒƒã‚¯
4. **ã‚«ãƒãƒ¬ãƒƒã‚¸æ¸¬å®š**: ãƒ†ã‚¹ãƒˆç¯„å›²ã®ç¢ºèª

æ¬¡ç« ã§ã¯ã€è¤‡æ•°ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚„APIã‚’çµ„ã¿åˆã‚ã›ãŸçµåˆãƒ†ã‚¹ãƒˆã‚’å®Ÿè£…ã—ã¾ã™ã€‚

---

## ğŸ’¡ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

**ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã™ã‚‹å ´åˆ:**

1. **src/lib/utils.ts ãŒå­˜åœ¨ã™ã‚‹ã‹ç¢ºèª**
   ```bash
   ls src/lib/utils.ts
   ```

2. **Jestã®è¨­å®šãŒæ­£ã—ã„ã‹ç¢ºèª**
   ```bash
   cat jest.config.js
   ```

3. **ãƒ†ã‚¹ãƒˆã‚’1ã¤ãšã¤å®Ÿè¡Œ**
   ```bash
   npm test -- utils.test.ts
   ```

4. **ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’èª­ã‚€**
   ```
   Expected: "2025-12-28"
   Received: ""
   
   â†’ formatDateé–¢æ•°ã®å®Ÿè£…ã‚’ç¢ºèª
   ```

**ã‚ˆãã‚ã‚‹ã‚¨ãƒ©ãƒ¼ã¨è§£æ±ºæ–¹æ³•:**

| ã‚¨ãƒ©ãƒ¼ | åŸå›  | è§£æ±ºæ–¹æ³• |
|--------|------|---------|
| `Cannot find module '@/lib/utils'` | ãƒ‘ã‚¹ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã®è¨­å®šãƒŸã‚¹ | `jest.config.js` ã® `moduleNameMapper` ã‚’ç¢ºèª |
| `toBeInTheDocument is not a function` | jest-dom ãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ãªã„ | `jest.setup.js` ã§ `@testing-library/jest-dom` ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ |
| `ReferenceError: fetch is not defined` | Node.js ã« fetch ãŒãªã„ | ã‚°ãƒ­ãƒ¼ãƒãƒ«ã« fetch ã®ãƒ¢ãƒƒã‚¯ã‚’è¨­å®š |
| ãƒ†ã‚¹ãƒˆãŒè¦‹ã¤ã‹ã‚‰ãªã„ | ãƒ•ã‚¡ã‚¤ãƒ«åãŒé–“é•ã£ã¦ã„ã‚‹ | `*.test.ts` ã¾ãŸã¯ `*.spec.ts` ã®å½¢å¼ã‹ç¢ºèª |

### package.json ã«ã‚¹ã‚¯ãƒªãƒ—ãƒˆè¿½åŠ 

```json
{
  "scripts": {
    "test": "jest",
    "test:watch": "jest --watch",
    "test:coverage": "jest --coverage",
    "test:ci": "jest --ci --coverage --maxWorkers=2"
  }
}
```

**å„ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®èª¬æ˜:**

| ã‚³ãƒãƒ³ãƒ‰ | èª¬æ˜ | ä½¿ç”¨å ´é¢ |
|---------|------|---------|
| `npm run test` | ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆã‚’1å›å®Ÿè¡Œ | æœ¬ç•ªå‰ã®æœ€çµ‚ç¢ºèª |
| `npm run test:watch` | ãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›´ã‚’ç›£è¦–ã—ã¦è‡ªå‹•å®Ÿè¡Œ | é–‹ç™ºä¸­ï¼ˆãŠã™ã™ã‚ï¼‰ |
| `npm run test:coverage` | ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆä»˜ãã§å®Ÿè¡Œ | ã‚«ãƒãƒ¬ãƒƒã‚¸ç¢ºèª |
| `npm run test:ci` | CI/CD ç”¨ï¼ˆä¸¦åˆ—å®Ÿè¡Œã‚’åˆ¶é™ï¼‰ | GitHub Actions ãªã© |

**ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®è©³ç´°:**

```bash
# --watch: ãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›´ã‚’ç›£è¦–
jest --watch
# â†’ ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿å­˜ã™ã‚‹ã¨è‡ªå‹•çš„ã«ãƒ†ã‚¹ãƒˆå†å®Ÿè¡Œ

# --coverage: ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆã‚’ç”Ÿæˆ
jest --coverage
# â†’ coverage/ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«HTMLãƒ¬ãƒãƒ¼ãƒˆã‚’å‡ºåŠ›

# --ci: CIç’°å¢ƒç”¨ã®è¨­å®š
jest --ci
# â†’ ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ç„¡åŠ¹åŒ–ã€ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ã‚’éè¡¨ç¤º

# --maxWorkers=2: ä¸¦åˆ—å®Ÿè¡Œæ•°ã‚’åˆ¶é™
jest --maxWorkers=2
# â†’ CIç’°å¢ƒã§ãƒ¡ãƒ¢ãƒªä¸è¶³ã‚’é˜²ã
```

**é–‹ç™ºæ™‚ã®æ¨å¥¨ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼:**

```bash
# ã‚¹ãƒ†ãƒƒãƒ—1: ãƒ†ã‚¹ãƒˆã‚’æ›¸ããªãŒã‚‰é–‹ç™º
$ npm run test:watch

# â†’ è‡ªå‹•çš„ã«ãƒ†ã‚¹ãƒˆãŒå®Ÿè¡Œã•ã‚Œã‚‹
# â†’ å¤±æ•—ã—ãŸãƒ†ã‚¹ãƒˆã ã‘ã‚’å†å®Ÿè¡Œã™ã‚‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚‚åˆ©ç”¨å¯èƒ½

# ã‚¹ãƒ†ãƒƒãƒ—2: ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’ç¢ºèª
$ npm run test:coverage

# â†’ coverage/lcov-report/index.html ã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ã
# â†’ ã©ã®è¡ŒãŒãƒ†ã‚¹ãƒˆã•ã‚Œã¦ã„ãªã„ã‹ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ã§ç¢ºèªã§ãã‚‹

# ã‚¹ãƒ†ãƒƒãƒ—3: ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¦ç¢ºèª
$ npm run test

# â†’ ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆãŒæˆåŠŸã™ã‚Œã°OK
```

---

[â† å‰ã®ç« ï¼šç¬¬26ç«  ãƒ†ã‚¹ãƒˆç’°å¢ƒã®åŸºç¤](26-ãƒ†ã‚¹ãƒˆç’°å¢ƒã®åŸºç¤.md) | [ç›®æ¬¡ã«æˆ»ã‚‹](00-ç›®æ¬¡.md) | [æ¬¡ã®ç« ã¸ï¼šç¬¬28ç«  çµåˆãƒ†ã‚¹ãƒˆã®å®Ÿè£… â†’](28-çµåˆãƒ†ã‚¹ãƒˆã®å®Ÿè£….md)

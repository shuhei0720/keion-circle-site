<div align="center">

# ğŸ¸ BOLD è»½éŸ³ ãƒ¡ãƒ³ãƒãƒ¼ã‚µã‚¤ãƒˆ

**Next.js 16 + TypeScript ã«ã‚ˆã‚‹è»½éŸ³ã‚µãƒ¼ã‚¯ãƒ«å°‚ç”¨ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **

[![Next.js](https://img.shields.io/badge/Next.js-16.1-black?style=flat-square&logo=next.js)](https://nextjs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.0-blue?style=flat-square&logo=typescript)](https://www.typescriptlang.org/)
[![Prisma](https://img.shields.io/badge/Prisma-5.22-2D3748?style=flat-square&logo=prisma)](https://www.prisma.io/)
[![Tailwind CSS](https://img.shields.io/badge/Tailwind-4.0-38B2AC?style=flat-square&logo=tailwind-css)](https://tailwindcss.com/)

[ğŸŒ æœ¬ç•ªç’°å¢ƒ](https://keion-circle-site.vercel.app/)

</div>

---

## ğŸ“‹ ç›®æ¬¡

- [ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦](#-ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦)
- [ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](#-ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£)
- [æ©Ÿèƒ½ä¸€è¦§](#-æ©Ÿèƒ½ä¸€è¦§)
- [æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯](#-æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯)
- [ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«](#-ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«)
- [APIä»•æ§˜](#-apiä»•æ§˜)
- [ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ](#-ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ)
- [é–‹ç™ºã‚¬ã‚¤ãƒ‰](#-é–‹ç™ºã‚¬ã‚¤ãƒ‰)

---

## ğŸ¯ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

BOLD è»½éŸ³ãƒ¡ãƒ³ãƒãƒ¼ã‚µã‚¤ãƒˆã¯ã€è»½éŸ³ã‚µãƒ¼ã‚¯ãƒ«ã®æ´»å‹•ã‚’æ”¯æ´ã™ã‚‹ãƒ¢ãƒ€ãƒ³ãªWebã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚æ´»å‹•å ±å‘Šã®å…±æœ‰ã€ã‚¤ãƒ™ãƒ³ãƒˆç®¡ç†ã€ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«èª¿æ•´ãªã©ã€ã‚µãƒ¼ã‚¯ãƒ«æ´»å‹•ã«å¿…è¦ãªæ©Ÿèƒ½ã‚’çµ±åˆã—ã€ãƒ¡ãƒ³ãƒãƒ¼é–“ã®ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å††æ»‘ã«ã—ã¾ã™ã€‚

### ä¸»è¦ãªç‰¹å¾´

- ğŸš€ **é«˜é€Ÿ**: Next.js 16 App Router ã«ã‚ˆã‚‹æœ€é©åŒ–ã•ã‚ŒãŸãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
- ğŸ“± **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–**: ãƒ¢ãƒã‚¤ãƒ«ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆãƒ‡ã‚¶ã‚¤ãƒ³ã§å…¨ãƒ‡ãƒã‚¤ã‚¹ã«å¯¾å¿œ
- ï¿½ **PWAå¯¾å¿œ**: ãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ã—ã¦ã‚¢ãƒ—ãƒªã®ã‚ˆã†ã«åˆ©ç”¨å¯èƒ½
- ï¿½ğŸ”’ **ã‚»ã‚­ãƒ¥ã‚¢**: NextAuth.js v5 ã«ã‚ˆã‚‹å …ç‰¢ãªèªè¨¼ã‚·ã‚¹ãƒ†ãƒ 
- ğŸ­ **å½¹å‰²ç®¡ç†**: ç®¡ç†è€…ã¨ä¸€èˆ¬ãƒ¡ãƒ³ãƒãƒ¼ã®æ¨©é™åˆ†é›¢
- âš¡ **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ **: æ¥½è¦³çš„UI ã«ã‚ˆã‚‹å³åº§ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
- ğŸ¥ **ãƒ¡ãƒ‡ã‚£ã‚¢å¯¾å¿œ**: YouTubeå‹•ç”»åŸ‹ã‚è¾¼ã¿ã¨ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
- ğŸ“Š **çµ±è¨ˆè¡¨ç¤º**: å‚åŠ çŠ¶æ³ã‚„ã„ã„ã­æ•°ã®å¯è¦–åŒ–

---

## ğŸ— ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```mermaid
graph TB
    subgraph "ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå±¤"
        Browser[ãƒ–ãƒ©ã‚¦ã‚¶]
        Mobile[ãƒ¢ãƒã‚¤ãƒ«]
    end
    
    subgraph "Next.js ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤"
        Pages[Pages<br/>React Components]
        API[API Routes<br/>RESTful API]
        Auth[NextAuth.js<br/>èªè¨¼ãƒ»èªå¯]
        ServerActions[Server Actions<br/>ã‚µãƒ¼ãƒãƒ¼ã‚¢ã‚¯ã‚·ãƒ§ãƒ³]
    end
    
    subgraph "ãƒ‡ãƒ¼ã‚¿å±¤"
        Prisma[Prisma ORM]
        DB[(PostgreSQL<br/>Supabase)]
        Storage[Supabase Storage<br/>ç”»åƒä¿å­˜]
    end
    
    subgraph "å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹"
        Google[Google OAuth 2.0]
        YouTube[YouTube API<br/>å‹•ç”»åŸ‹ã‚è¾¼ã¿]
    end
    
    Browser --> Pages
    Mobile --> Pages
    Pages --> API
    Pages --> ServerActions
    API --> Auth
    Auth --> Google
    API --> Prisma
    ServerActions --> Prisma
    Prisma --> DB
    API --> Storage
    Pages --> YouTube
    
    style Browser fill:#e3f2fd
    style Mobile fill:#e3f2fd
    style Pages fill:#fff3e0
    style API fill:#fff3e0
    style Auth fill:#f3e5f5
    style Prisma fill:#e8f5e9
    style DB fill:#e8f5e9
    style Storage fill:#e8f5e9
```

### ãƒ¬ã‚¤ãƒ¤ãƒ¼èª¬æ˜

1. **ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå±¤**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹Webãƒ–ãƒ©ã‚¦ã‚¶ãƒ»ãƒ¢ãƒã‚¤ãƒ«ãƒ–ãƒ©ã‚¦ã‚¶
2. **ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤**: Next.js App Routerã«ã‚ˆã‚‹çµ±åˆã•ã‚ŒãŸãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ»ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
3. **ãƒ‡ãƒ¼ã‚¿å±¤**: PrismaçµŒç”±ã§PostgreSQLã¨Supabase Storageã«ã‚¢ã‚¯ã‚»ã‚¹
4. **å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹å±¤**: Google OAuthã¨YouTubeåŸ‹ã‚è¾¼ã¿

---

## âœ¨ æ©Ÿèƒ½ä¸€è¦§

### 1ï¸âƒ£ èªè¨¼ã‚·ã‚¹ãƒ†ãƒ 

```mermaid
graph LR
    User[ãƒ¦ãƒ¼ã‚¶ãƒ¼] --> Choice{ãƒ­ã‚°ã‚¤ãƒ³æ–¹æ³•}
    Choice -->|Google| OAuth[Google OAuth 2.0]
    Choice -->|ãƒ¡ãƒ¼ãƒ«| EmailPass[ãƒ¡ãƒ¼ãƒ«+ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰]
    OAuth --> Session[ã‚»ãƒƒã‚·ãƒ§ãƒ³ç”Ÿæˆ]
    EmailPass --> Verify[ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰æ¤œè¨¼<br/>bcryptjs]
    Verify --> Session
    Session --> Dashboard[ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰]
    
    style User fill:#e3f2fd
    style OAuth fill:#fbbc04
    style EmailPass fill:#4285f4
    style Session fill:#34a853
    style Dashboard fill:#ea4335
```

**æ©Ÿèƒ½è©³ç´°:**
- **Google OAuth 2.0**: ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯ãƒ­ã‚°ã‚¤ãƒ³ï¼ˆåå‰ã€ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã€ã‚¢ãƒã‚¿ãƒ¼ç”»åƒã‚’è‡ªå‹•ç™»éŒ²ï¼‰
- **ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ + ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰**: bcryptjsã«ã‚ˆã‚‹å®‰å…¨ãªãƒãƒƒã‚·ãƒ¥åŒ–
- **å½¹å‰²ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡**:
  - ğŸ”‘ **ç®¡ç†è€…ï¼ˆadminï¼‰**: å…¨æ©Ÿèƒ½ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã€ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ä½œæˆãƒ»ç·¨é›†ãƒ»å‰Šé™¤
  - ğŸ‘¤ **ä¸€èˆ¬ãƒ¡ãƒ³ãƒãƒ¼ï¼ˆmemberï¼‰**: é–²è¦§ã€å‚åŠ ç™»éŒ²ã€ã„ã„ã­ã€ã‚³ãƒ¡ãƒ³ãƒˆ

### 2ï¸âƒ£ æ´»å‹•å ±å‘Šï¼ˆæŠ•ç¨¿æ©Ÿèƒ½ï¼‰

**ç®¡ç†è€…ã®ã¿ä½œæˆå¯èƒ½ | å…¬é–‹ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ï¼ˆãƒ­ã‚°ã‚¤ãƒ³ä¸è¦ã§é–²è¦§ï¼‰**

- âœ… **Markdownå¯¾å¿œ**: ãƒªãƒƒãƒãƒ†ã‚­ã‚¹ãƒˆç·¨é›†ï¼ˆè¦‹å‡ºã—ã€ãƒªã‚¹ãƒˆã€å¤ªå­—ã€ãƒªãƒ³ã‚¯ï¼‰
- âœ… **è¤‡æ•°YouTubeå‹•ç”»**: 1ã¤ã®æŠ•ç¨¿ã«è¤‡æ•°å‹•ç”»ã‚’åŸ‹ã‚è¾¼ã¿
  - å¯¾å¿œãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ: `/watch`, `/live/`, `/shorts/`, `/embed/`, `youtu.be`
- âœ… **ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰**: Supabase Storageã«ã‚ˆã‚‹ç”»åƒç®¡ç†ï¼ˆè¤‡æ•°æšå¯¾å¿œï¼‰
- âœ… **å‚åŠ çŠ¶æ³ç®¡ç†**: ãƒ¡ãƒ³ãƒãƒ¼ãŒã€Œå‚åŠ ã€ã€Œä¸å‚åŠ ã€ã‚’ç™»éŒ²
- âœ… **ã„ã„ã­æ©Ÿèƒ½**: æ¥½è¦³çš„UIã«ã‚ˆã‚‹å³åº§ã®åæ˜ ï¼ˆãƒˆã‚°ãƒ«å¼ï¼‰
- âœ… **ã‚³ãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½**: ãƒã‚¹ãƒˆãªã—ã‚·ãƒ³ãƒ—ãƒ«ã‚³ãƒ¡ãƒ³ãƒˆ
- âœ… **ã‚¤ãƒ™ãƒ³ãƒˆ/ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‹ã‚‰ã®è‡ªå‹•ç”Ÿæˆ**: ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ©Ÿèƒ½ã§ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯ä½œæˆ

### 3ï¸âƒ£ ã‚¤ãƒ™ãƒ³ãƒˆç®¡ç†

**ç®¡ç†è€…ã®ã¿ä½œæˆå¯èƒ½ | ãƒ¡ãƒ³ãƒãƒ¼å…¨å“¡ãŒé–²è¦§ãƒ»å‚åŠ å¯èƒ½**

```mermaid
graph TD
    Create[ã‚¤ãƒ™ãƒ³ãƒˆä½œæˆ] --> Details[åŸºæœ¬æƒ…å ±å…¥åŠ›<br/>ã‚¿ã‚¤ãƒˆãƒ«/æ—¥æ™‚/å ´æ‰€]
    Details --> Songs[èª²é¡Œæ›²è¿½åŠ ]
    Songs --> Parts[ãƒ‘ãƒ¼ãƒˆå‰²ã‚Šå½“ã¦<br/>ãƒœãƒ¼ã‚«ãƒ«/ã‚®ã‚¿ãƒ¼/ãƒ™ãƒ¼ã‚¹<br/>ãƒ‰ãƒ©ãƒ /ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰]
    Parts --> Participants[å‚åŠ è€…å‹Ÿé›†]
    Participants --> Report[æ´»å‹•å ±å‘Šä½œæˆ]
    Report --> Post[æŠ•ç¨¿ã¨ã—ã¦å…¬é–‹]
    
    style Create fill:#e3f2fd
    style Songs fill:#fff3e0
    style Parts fill:#f3e5f5
    style Report fill:#e8f5e9
    style Post fill:#ffebee
```

**æ©Ÿèƒ½è©³ç´°:**
- ğŸ“… **ã‚¤ãƒ™ãƒ³ãƒˆä½œæˆ**: æ—¥æ™‚ã€å ´æ‰€ã€å†…å®¹ã®è¨­å®š
- ğŸµ **èª²é¡Œæ›²ç®¡ç†**: 
  - æ›²åã€æ¥½è­œURLã€YouTubeå‹•ç”»URL
  - ãƒ‘ãƒ¼ãƒˆåˆ¥ã®æ‹…å½“è€…å‰²ã‚Šå½“ã¦ï¼ˆãƒœãƒ¼ã‚«ãƒ«ã€ã‚®ã‚¿ãƒ¼ã€ãƒ™ãƒ¼ã‚¹ã€ãƒ‰ãƒ©ãƒ ã€ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ï¼‰
- ğŸ‘¥ **å‚åŠ è€…ç®¡ç†**: ãƒ¡ãƒ³ãƒãƒ¼ã®å‚åŠ çŠ¶æ³ã‚’è¨˜éŒ²
- ğŸ’¬ **ã‚³ãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½**: ã‚¤ãƒ™ãƒ³ãƒˆã«å¯¾ã™ã‚‹ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
- ğŸ“ **æ´»å‹•å ±å‘Šã¸ã®å¤‰æ›**: ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±ã‚’ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ã—ã¦æ´»å‹•å ±å‘Šã‚’ä½œæˆ
  - ã‚¤ãƒ™ãƒ³ãƒˆè©³ç´°ã€èª²é¡Œæ›²ãƒªã‚¹ãƒˆã€å‚åŠ è€…ãƒªã‚¹ãƒˆã‚’è‡ªå‹•æŒ¿å…¥

### 4ï¸âƒ£ æ´»å‹•ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«

**ç®¡ç†è€…ã®ã¿ä½œæˆå¯èƒ½ | ãƒ¡ãƒ³ãƒãƒ¼å…¨å“¡ãŒé–²è¦§ãƒ»å‚åŠ å¯èƒ½**

- ğŸ“† **ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ä½œæˆ**: æ—¥æ™‚ã€å ´æ‰€ã€å†…å®¹ã®è¨­å®š
- ğŸ—ºï¸ **åœ°å›³ãƒªãƒ³ã‚¯**: Google Mapsãªã©ã®å ´æ‰€URLã‚’è¨­å®šå¯èƒ½
- ğŸ‘¥ **å‚åŠ è€…ç®¡ç†**: ãƒ¡ãƒ³ãƒãƒ¼ã®å‚åŠ çŠ¶æ³ã‚’è¨˜éŒ²
- ğŸ’¬ **ã‚³ãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½**: ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã«å¯¾ã™ã‚‹ã‚³ãƒ¡ãƒ³ãƒˆæŠ•ç¨¿
- ğŸ“ **æ´»å‹•å ±å‘Šã¸ã®å¤‰æ›**: ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«æƒ…å ±ã‚’ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ã—ã¦æ´»å‹•å ±å‘Šã‚’ä½œæˆ

### 5ï¸âƒ£ ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«

- ğŸ–¼ï¸ **ã‚¢ãƒã‚¿ãƒ¼ç”»åƒ**: Supabase Storageã«ã‚ˆã‚‹ç”»åƒç®¡ç†
- âœï¸ **è‡ªå·±ç´¹ä»‹**: ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æƒ…å ±ã®ç·¨é›†
- ğŸ¸ **æ‹…å½“æ¥½å™¨**: æ¥½å™¨æƒ…å ±ã®ç™»éŒ²
- ğŸ“Š **æ´»å‹•å±¥æ­´**: å‚åŠ ã—ãŸæ´»å‹•ã®ä¸€è¦§è¡¨ç¤º

### 6ï¸âƒ£ ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ï¼ˆç®¡ç†è€…ã®ã¿ï¼‰

- ğŸ‘¥ **ãƒ¡ãƒ³ãƒãƒ¼ä¸€è¦§**: å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¡¨ç¤º
- ğŸ”„ **å½¹å‰²å¤‰æ›´**: ä¸€èˆ¬ãƒ¡ãƒ³ãƒãƒ¼ â†” ç®¡ç†è€…ã®åˆ‡ã‚Šæ›¿ãˆ
- ğŸ“Š **æ´»å‹•çµ±è¨ˆ**: å„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å‚åŠ å›æ•°ãªã©ã‚’è¡¨ç¤º

---

## ğŸ›  æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰

| æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€” |
|------|-----------|------|
| Next.js | 16.1 | App Routerã€Server Componentsã€Server Actions |
| React | 19 | UIæ§‹ç¯‰ |
| TypeScript | 5.0 | å‹å®‰å…¨ãªé–‹ç™º |
| Tailwind CSS | 4.0 | ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆCSS |
| Lucide React | latest | ã‚¢ã‚¤ã‚³ãƒ³ãƒ©ã‚¤ãƒ–ãƒ©ãƒª |
| react-youtube | latest | YouTubeå‹•ç”»åŸ‹ã‚è¾¼ã¿ |

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰

| æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€” |
|------|-----------|------|
| Next.js API Routes | 16.1 | RESTful API |
| Prisma | 5.22 | ORMï¼ˆObject-Relational Mappingï¼‰ |
| PostgreSQL | latest | æœ¬ç•ªç’°å¢ƒãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆSupabaseï¼‰ |
| SQLite | latest | ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ |

### èªè¨¼

| æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€” |
|------|-----------|------|
| NextAuth.js | v5 | èªè¨¼ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ |
| Google OAuth 2.0 | - | ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒ­ã‚°ã‚¤ãƒ³ |
| bcryptjs | latest | ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒã‚·ãƒ¥åŒ– |

### ã‚¤ãƒ³ãƒ•ãƒ©

| ã‚µãƒ¼ãƒ“ã‚¹ | ç”¨é€” |
|---------|------|
| Vercel | ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ãƒ»CI/CD |
| Supabase | ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ»ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ |
| GitHub | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç† |

---

## ğŸ—„ ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

### ERå›³

```mermaid
erDiagram
    User ||--o{ Post : creates
    User ||--o{ Event : creates
    User ||--o{ ActivitySchedule : creates
    User ||--o{ PostParticipant : participates
    User ||--o{ PostLike : likes
    User ||--o{ Comment : writes
    User ||--o{ EventParticipant : participates
    User ||--o{ ActivityParticipant : participates
    User ||--o{ Account : has
    User ||--o{ Session : has
    
    Post ||--o{ PostParticipant : has
    Post ||--o{ PostLike : has
    Post ||--o{ Comment : has
    Post }o--|| Event : references
    
    Event ||--o{ EventParticipant : has
    Event ||--o{ Comment : has
    Event ||--o{ Post : generates
    
    ActivitySchedule ||--o{ ActivityParticipant : has
    ActivitySchedule ||--o{ Comment : has
    
    User {
        string id PK
        string name
        string email UK
        string password
        string avatarUrl
        string bio
        string instruments
        string role
        datetime createdAt
        datetime updatedAt
    }
    
    Post {
        string id PK
        string title
        string content
        array youtubeUrls
        array images
        string userId FK
        string eventId FK
        string activityScheduleId FK
        datetime createdAt
        datetime updatedAt
    }
    
    Event {
        string id PK
        string title
        string content
        datetime date
        string locationName
        string locationUrl
        string songs
        string userId FK
        datetime createdAt
        datetime updatedAt
    }
    
    ActivitySchedule {
        string id PK
        string title
        string content
        datetime date
        string location
        string locationUrl
        string userId FK
        datetime createdAt
        datetime updatedAt
    }
    
    PostParticipant {
        string id PK
        string postId FK
        string userId FK
        string status
        datetime createdAt
    }
    
    PostLike {
        string id PK
        string postId FK
        string userId FK
        datetime createdAt
    }
    
    Comment {
        string id PK
        string content
        string userId FK
        string postId FK
        string activityScheduleId FK
        string eventId FK
        datetime createdAt
        datetime updatedAt
    }
    
    EventParticipant {
        string id PK
        string eventId FK
        string userId FK
        datetime createdAt
    }
    
    ActivityParticipant {
        string id PK
        string activityScheduleId FK
        string userId FK
        datetime createdAt
    }
    
    Account {
        string id PK
        string userId FK
        string provider
        string providerAccountId
    }
    
    Session {
        string id PK
        string userId FK
        string sessionToken UK
        datetime expires
    }
```

### ä¸»è¦ãƒ¢ãƒ‡ãƒ«èª¬æ˜

#### Userï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰
- ã‚µãƒ¼ã‚¯ãƒ«ãƒ¡ãƒ³ãƒãƒ¼ã®åŸºæœ¬æƒ…å ±ã‚’ç®¡ç†
- `role`: "admin" ã¾ãŸã¯ "member" ã§æ¨©é™ã‚’åˆ¶å¾¡
- `instruments`: æ¼”å¥å¯èƒ½ãªæ¥½å™¨æƒ…å ±ï¼ˆJSONå½¢å¼ï¼‰

#### Postï¼ˆæŠ•ç¨¿ãƒ»æ´»å‹•å ±å‘Šï¼‰
- ã‚µãƒ¼ã‚¯ãƒ«ã®æ´»å‹•å ±å‘Šã‚’ç®¡ç†
- `youtubeUrls`: è¤‡æ•°ã®YouTubeå‹•ç”»URLï¼ˆé…åˆ—ï¼‰
- `images`: è¤‡æ•°ã®ç”»åƒURLï¼ˆé…åˆ—ã€Supabase Storageï¼‰
- `eventId` / `activityScheduleId`: ã‚¤ãƒ™ãƒ³ãƒˆãƒ»ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‹ã‚‰ã®è‡ªå‹•ç”Ÿæˆæ™‚ã«å‚ç…§

#### Eventï¼ˆã‚¤ãƒ™ãƒ³ãƒˆï¼‰
- ãƒ©ã‚¤ãƒ–ã‚„ã‚»ãƒƒã‚·ãƒ§ãƒ³ãªã©ã®ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±
- `songs`: èª²é¡Œæ›²æƒ…å ±ï¼ˆJSONå½¢å¼ï¼‰[{title, sheetUrl, youtubeUrl, parts: {instrument: player}}]
- ã‚¤ãƒ™ãƒ³ãƒˆçµ‚äº†å¾Œã€æ´»å‹•å ±å‘Šï¼ˆPostï¼‰ã«å¤‰æ›å¯èƒ½

#### ActivityScheduleï¼ˆæ´»å‹•ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼‰
- ç·´ç¿’æ—¥ç¨‹ãªã©ã®æ´»å‹•ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
- `location` / `locationUrl`: å ´æ‰€æƒ…å ±ã¨Google Mapsãƒªãƒ³ã‚¯
- æ´»å‹•çµ‚äº†å¾Œã€æ´»å‹•å ±å‘Šï¼ˆPostï¼‰ã«å¤‰æ›å¯èƒ½

#### Commentï¼ˆã‚³ãƒ¡ãƒ³ãƒˆï¼‰
- æŠ•ç¨¿ã€ã‚¤ãƒ™ãƒ³ãƒˆã€æ´»å‹•ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã«å¯¾ã™ã‚‹ã‚³ãƒ¡ãƒ³ãƒˆ
- ãƒãƒªãƒ¢ãƒ¼ãƒ•ã‚£ãƒƒã‚¯é–¢é€£ï¼ˆpostId / eventId / activityScheduleIdï¼‰

---

## ğŸ”Œ APIä»•æ§˜

### ğŸ“Š APIã‚µãƒãƒªãƒ¼

- **ç·ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆæ•°**: 35
- **å…¬é–‹ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½**: 6ï¼ˆèªè¨¼ä¸è¦ï¼‰
- **ãƒ¡ãƒ³ãƒãƒ¼æ¨©é™**: 19ï¼ˆmember/adminï¼‰
- **ç®¡ç†è€…å°‚ç”¨**: 10ï¼ˆadminï¼‰
- **HTTPãƒ¡ã‚½ãƒƒãƒ‰**: GET (8), POST (20), PUT (4), PATCH (2), DELETE (5)

### ğŸ” èªè¨¼ãƒ»èªå¯ãƒ•ãƒ­ãƒ¼

```mermaid
sequenceDiagram
    participant Client as ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
    participant API as API Route
    participant Auth as NextAuth.js
    participant DB as Database
    
    Client->>API: ãƒªã‚¯ã‚¨ã‚¹ãƒˆ + Cookie
    API->>Auth: getServerSession()
    Auth->>DB: ã‚»ãƒƒã‚·ãƒ§ãƒ³æ¤œè¨¼
    DB-->>Auth: Useræƒ…å ±
    Auth-->>API: Session + User
    
    alt èªè¨¼å¿…é ˆã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
        API->>API: sessionå­˜åœ¨ãƒã‚§ãƒƒã‚¯
        alt ã‚»ãƒƒã‚·ãƒ§ãƒ³ãªã—
            API-->>Client: 401 Unauthorized
        end
    end
    
    alt ç®¡ç†è€…å°‚ç”¨ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
        API->>API: user.role === "admin"
        alt ç®¡ç†è€…ã§ãªã„
            API-->>Client: 403 Forbidden
        end
    end
    
    API->>DB: ãƒ‡ãƒ¼ã‚¿æ“ä½œ
    DB-->>API: çµæœ
    API-->>Client: ãƒ¬ã‚¹ãƒãƒ³ã‚¹
```

### ğŸ“ API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆä¸€è¦§

#### æŠ•ç¨¿ (Posts) - `/api/posts`

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èªè¨¼ | æ¨©é™ | èª¬æ˜ |
|---------|--------------|------|------|------|
| GET | `/api/posts` | ä¸è¦ | public | æŠ•ç¨¿ä¸€è¦§ã‚’å–å¾—ï¼ˆæœ€æ–°50ä»¶ï¼‰ |
| POST | `/api/posts` | å¿…é ˆ | admin | æ–°è¦æŠ•ç¨¿ã‚’ä½œæˆ |
| GET | `/api/posts/[id]` | ä¸è¦ | public | ç‰¹å®šã®æŠ•ç¨¿ã‚’å–å¾— |
| PUT | `/api/posts/[id]` | å¿…é ˆ | admin | æŠ•ç¨¿ã‚’æ›´æ–° |
| DELETE | `/api/posts/[id]` | å¿…é ˆ | admin | æŠ•ç¨¿ã‚’å‰Šé™¤ |
| GET | `/api/posts/[id]/details` | ä¸è¦ | public | æŠ•ç¨¿è©³ç´°ï¼ˆã‚³ãƒ¡ãƒ³ãƒˆå«ã‚€ï¼‰ |
| POST | `/api/posts/[id]/comments` | å¿…é ˆ | member/admin | ã‚³ãƒ¡ãƒ³ãƒˆã‚’æŠ•ç¨¿ |
| POST | `/api/posts/[id]/like` | å¿…é ˆ | member/admin | ã„ã„ã­ã‚’ç™»éŒ²ãƒ»å‰Šé™¤ï¼ˆãƒˆã‚°ãƒ«ï¼‰ |
| DELETE | `/api/posts/[id]/like` | å¿…é ˆ | member/admin | ã„ã„ã­ã‚’å‰Šé™¤ |
| POST | `/api/posts/[id]/participate` | å¿…é ˆ | member/admin | å‚åŠ /ä¸å‚åŠ ã‚’ç™»éŒ² |
| DELETE | `/api/posts/[id]/participate` | å¿…é ˆ | member/admin | å‚åŠ ã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ« |
| POST | `/api/posts/image` | å¿…é ˆ | member/admin | ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼ˆBase64ï¼‰ |

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹: POST `/api/posts`**
```json
{
  "title": "2025å¹´12æœˆ ç¬¬1å›ã‚»ãƒƒã‚·ãƒ§ãƒ³",
  "content": "# ä»Šå›ã®å†…å®¹\n- ã‚®ã‚¿ãƒ¼ç·´ç¿’\n- ãƒ‰ãƒ©ãƒ ç·´ç¿’",
  "youtubeUrls": [
    "https://www.youtube.com/watch?v=xxxxx",
    "https://youtu.be/yyyyy"
  ],
  "images": [
    "https://supabase.co/storage/v1/object/public/avatars/image1.jpg"
  ]
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹: GET `/api/posts`**
```json
[
  {
    "id": "clx123abc",
    "title": "2025å¹´12æœˆ ç¬¬1å›ã‚»ãƒƒã‚·ãƒ§ãƒ³",
    "content": "# ä»Šå›ã®å†…å®¹\n- ã‚®ã‚¿ãƒ¼ç·´ç¿’",
    "youtubeUrls": ["https://www.youtube.com/watch?v=xxxxx"],
    "images": ["https://supabase.co/storage/..."],
    "createdAt": "2025-12-23T10:00:00Z",
    "userId": "user123",
    "user": {
      "id": "user123",
      "name": "å±±ç”°å¤ªéƒ",
      "email": "yamada@example.com",
      "avatarUrl": "https://..."
    },
    "participants": [
      {
        "id": "part123",
        "status": "participating",
        "user": { "id": "user456", "name": "ä½è—¤èŠ±å­" }
      }
    ],
    "likes": [
      { "userId": "user789", "createdAt": "2025-12-23T11:00:00Z" }
    ],
    "_count": { "comments": 5 }
  }
]
```

#### ã‚¤ãƒ™ãƒ³ãƒˆ (Events) - `/api/events`

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èªè¨¼ | æ¨©é™ | èª¬æ˜ |
|---------|--------------|------|------|------|
| GET | `/api/events` | å¿…é ˆ | member/admin | ã‚¤ãƒ™ãƒ³ãƒˆä¸€è¦§ã‚’å–å¾— |
| POST | `/api/events` | å¿…é ˆ | admin | ã‚¤ãƒ™ãƒ³ãƒˆã‚’ä½œæˆ |
| PUT | `/api/events/[id]` | å¿…é ˆ | admin | ã‚¤ãƒ™ãƒ³ãƒˆã‚’æ›´æ–° |
| DELETE | `/api/events/[id]` | å¿…é ˆ | admin | ã‚¤ãƒ™ãƒ³ãƒˆã‚’å‰Šé™¤ |
| POST | `/api/events/[id]/comments` | å¿…é ˆ | member/admin | ã‚³ãƒ¡ãƒ³ãƒˆã‚’æŠ•ç¨¿ |
| POST | `/api/events/[id]/participate` | å¿…é ˆ | member/admin | å‚åŠ ç™»éŒ²/è§£é™¤ï¼ˆãƒˆã‚°ãƒ«ï¼‰ |
| POST | `/api/events/[id]/report` | å¿…é ˆ | admin | æ´»å‹•å ±å‘Šã‚’ä½œæˆ |

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹: POST `/api/events`**
```json
{
  "title": "æ–°å¹´ãƒ©ã‚¤ãƒ–2025",
  "content": "æ–°å¹´æœ€åˆã®ãƒ©ã‚¤ãƒ–ã‚¤ãƒ™ãƒ³ãƒˆã§ã™",
  "date": "2025-01-15T18:00:00Z",
  "locationName": "å¸‚æ°‘ä¼šé¤¨ãƒ›ãƒ¼ãƒ«",
  "locationUrl": "https://maps.google.com/?q=...",
  "songs": [
    {
      "title": "Yesterday",
      "sheetUrl": "https://example.com/sheet.pdf",
      "youtubeUrl": "https://www.youtube.com/watch?v=xxxxx",
      "parts": {
        "vocal": "å±±ç”°å¤ªéƒ",
        "guitar": "ä½è—¤èŠ±å­",
        "bass": "éˆ´æœ¨ä¸€éƒ",
        "drums": "ç”°ä¸­æ¬¡éƒ",
        "keyboard": "é«˜æ©‹ä¸‰éƒ"
      }
    }
  ]
}
```

#### æ´»å‹•ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ« (Activity Schedules) - `/api/activity-schedules`

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èªè¨¼ | æ¨©é™ | èª¬æ˜ |
|---------|--------------|------|------|------|
| GET | `/api/activity-schedules` | å¿…é ˆ | member/admin | ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ä¸€è¦§ã‚’å–å¾— |
| POST | `/api/activity-schedules` | å¿…é ˆ | admin | ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½œæˆ |
| PUT | `/api/activity-schedules/[id]` | å¿…é ˆ | admin | ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’æ›´æ–° |
| DELETE | `/api/activity-schedules/[id]` | å¿…é ˆ | admin | ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’å‰Šé™¤ |
| POST | `/api/activity-schedules/[id]/comments` | å¿…é ˆ | member/admin | ã‚³ãƒ¡ãƒ³ãƒˆã‚’æŠ•ç¨¿ |
| POST | `/api/activity-schedules/[id]/participate` | å¿…é ˆ | member/admin | å‚åŠ ç™»éŒ²/è§£é™¤ |
| POST | `/api/activity-schedules/[id]/report` | å¿…é ˆ | admin | æ´»å‹•å ±å‘Šã‚’ä½œæˆ |

#### ãƒ¦ãƒ¼ã‚¶ãƒ¼ (Users) - `/api/users`

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èªè¨¼ | æ¨©é™ | èª¬æ˜ |
|---------|--------------|------|------|------|
| GET | `/api/users` | å¿…é ˆ | admin | ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§ã‚’å–å¾— |
| DELETE | `/api/users/[id]` | å¿…é ˆ | admin | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’å‰Šé™¤ |
| PATCH | `/api/users/[id]` | å¿…é ˆ | admin | ãƒ¦ãƒ¼ã‚¶ãƒ¼å½¹å‰²ã‚’æ›´æ–° |

#### ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ« (Profile) - `/api/profile`

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èªè¨¼ | æ¨©é™ | èª¬æ˜ |
|---------|--------------|------|------|------|
| PATCH | `/api/profile` | å¿…é ˆ | member/admin | è‡ªåˆ†ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’æ›´æ–° |
| POST | `/api/profile/avatar` | å¿…é ˆ | member/admin | ã‚¢ãƒã‚¿ãƒ¼ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ |

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹: PATCH `/api/profile`**
```json
{
  "name": "å±±ç”°å¤ªéƒ",
  "bio": "ã‚®ã‚¿ãƒ¼æ‹…å½“ã§ã™ã€‚ã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™ï¼",
  "instruments": "ã‚®ã‚¿ãƒ¼ã€ãƒ™ãƒ¼ã‚¹"
}
```

---

## ğŸ“ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
keion-circle-site/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                          # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ api/                      # API Routes
â”‚   â”‚   â”‚   â”œâ”€â”€ auth/                 # NextAuth.js èªè¨¼
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ [...nextauth]/   # å‹•çš„èªè¨¼ãƒ«ãƒ¼ãƒˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ posts/                # æŠ•ç¨¿API
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ [id]/            # å€‹åˆ¥æŠ•ç¨¿æ“ä½œ
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ route.ts     # GET/PUT/DELETE
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ details/     # è©³ç´°å–å¾—
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ comments/    # ã‚³ãƒ¡ãƒ³ãƒˆ
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ like/        # ã„ã„ã­
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ participate/ # å‚åŠ ç™»éŒ²
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ image/           # ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ route.ts         # GET/POSTï¼ˆä¸€è¦§ãƒ»ä½œæˆï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ events/               # ã‚¤ãƒ™ãƒ³ãƒˆAPI
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ [id]/            # å€‹åˆ¥ã‚¤ãƒ™ãƒ³ãƒˆæ“ä½œ
â”‚   â”‚   â”‚   â”œâ”€â”€ activity-schedules/   # æ´»å‹•ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«API
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ [id]/            # å€‹åˆ¥ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«æ“ä½œ
â”‚   â”‚   â”‚   â”œâ”€â”€ users/                # ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†API
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ [id]/            # å€‹åˆ¥ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œ
â”‚   â”‚   â”‚   â””â”€â”€ profile/              # ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«API
â”‚   â”‚   â”‚       â””â”€â”€ avatar/          # ã‚¢ãƒã‚¿ãƒ¼ç”»åƒ
â”‚   â”‚   â”œâ”€â”€ posts/                    # æ´»å‹•å ±å‘Šãƒšãƒ¼ã‚¸
â”‚   â”‚   â”‚   â”œâ”€â”€ [id]/                 # å€‹åˆ¥æŠ•ç¨¿ãƒšãƒ¼ã‚¸
â”‚   â”‚   â”‚   â”œâ”€â”€ new/                  # æ–°è¦æŠ•ç¨¿ä½œæˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ edit/[id]/            # æŠ•ç¨¿ç·¨é›†
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx              # æŠ•ç¨¿ä¸€è¦§
â”‚   â”‚   â”œâ”€â”€ events/                   # ã‚¤ãƒ™ãƒ³ãƒˆãƒšãƒ¼ã‚¸
â”‚   â”‚   â”‚   â”œâ”€â”€ [id]/                 # å€‹åˆ¥ã‚¤ãƒ™ãƒ³ãƒˆãƒšãƒ¼ã‚¸
â”‚   â”‚   â”‚   â”œâ”€â”€ new/                  # æ–°è¦ã‚¤ãƒ™ãƒ³ãƒˆä½œæˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ edit/[id]/            # ã‚¤ãƒ™ãƒ³ãƒˆç·¨é›†
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx              # ã‚¤ãƒ™ãƒ³ãƒˆä¸€è¦§
â”‚   â”‚   â”œâ”€â”€ activity-schedules/       # æ´»å‹•ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒšãƒ¼ã‚¸
â”‚   â”‚   â”‚   â””â”€â”€ (åŒä¸Š)
â”‚   â”‚   â”œâ”€â”€ users/                    # ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ãƒšãƒ¼ã‚¸
â”‚   â”‚   â”‚   â”œâ”€â”€ [id]/                 # ãƒ¦ãƒ¼ã‚¶ãƒ¼è©³ç´°
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx              # ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§
â”‚   â”‚   â”œâ”€â”€ profile/                  # ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒšãƒ¼ã‚¸
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â”œâ”€â”€ auth/                     # èªè¨¼ãƒšãƒ¼ã‚¸
â”‚   â”‚   â”‚   â”œâ”€â”€ signin/               # ã‚µã‚¤ãƒ³ã‚¤ãƒ³
â”‚   â”‚   â”‚   â””â”€â”€ signup/               # ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—
â”‚   â”‚   â”œâ”€â”€ layout.tsx                # ãƒ«ãƒ¼ãƒˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚   â”‚   â””â”€â”€ page.tsx                  # ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ï¼ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼‰
â”‚   â”œâ”€â”€ components/                   # å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ DashboardLayout.tsx       # ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚   â”‚   â”œâ”€â”€ Navigation.tsx            # ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼
â”‚   â”‚   â”œâ”€â”€ LoginForm.tsx             # ãƒ­ã‚°ã‚¤ãƒ³ãƒ•ã‚©ãƒ¼ãƒ 
â”‚   â”‚   â”œâ”€â”€ RichTextEditor.tsx        # Markdownã‚¨ãƒ‡ã‚£ã‚¿
â”‚   â”‚   â”œâ”€â”€ YouTubeEmbed.tsx          # YouTubeåŸ‹ã‚è¾¼ã¿
â”‚   â”‚   â”œâ”€â”€ Avatar.tsx                # ã‚¢ãƒã‚¿ãƒ¼è¡¨ç¤º
â”‚   â”‚   â”œâ”€â”€ Button.tsx                # ãƒœã‚¿ãƒ³
â”‚   â”‚   â”œâ”€â”€ Card.tsx                  # ã‚«ãƒ¼ãƒ‰
â”‚   â”‚   â””â”€â”€ Modal.tsx                 # ãƒ¢ãƒ¼ãƒ€ãƒ«
â”‚   â”œâ”€â”€ lib/                          # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”‚   â”œâ”€â”€ auth.ts                   # NextAuthè¨­å®š
â”‚   â”‚   â”œâ”€â”€ prisma.ts                 # Prismaã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ permissions.ts            # æ¨©é™ãƒã‚§ãƒƒã‚¯é–¢æ•°
â”‚   â”‚   â””â”€â”€ supabase.ts               # Supabaseã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â””â”€â”€ types/                        # å‹å®šç¾©
â”‚       â””â”€â”€ next-auth.d.ts            # NextAuthå‹æ‹¡å¼µ
â”œâ”€â”€ prisma/
â”‚   â””â”€â”€ schema.prisma                 # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ create-admin.js               # ç®¡ç†è€…ä½œæˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”œâ”€â”€ public/                           # é™çš„ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”œâ”€â”€ icon.svg                      # PWAã‚¢ã‚¤ã‚³ãƒ³
â”‚   â”œâ”€â”€ apple-touch-icon.svg          # iOSç”¨ã‚¢ã‚¤ã‚³ãƒ³
â”‚   â”œâ”€â”€ manifest.json                 # PWAãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆ
â”‚   â””â”€â”€ hero-bg.jpg                   # ãƒ’ãƒ¼ãƒ­ãƒ¼èƒŒæ™¯ç”»åƒ
â”œâ”€â”€ .env.example                      # ç’°å¢ƒå¤‰æ•°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â”œâ”€â”€ next.config.ts                    # Next.jsè¨­å®š
â”œâ”€â”€ package.json                      # ä¾å­˜é–¢ä¿‚ãƒ»ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”œâ”€â”€ tsconfig.json                     # TypeScriptè¨­å®š
â”œâ”€â”€ tailwind.config.ts                # Tailwind CSSè¨­å®š
â”œâ”€â”€ postcss.config.mjs                # PostCSSè¨­å®š
â””â”€â”€ README.md                         # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
```

---

## ğŸ‘¨â€ğŸ’» é–‹ç™ºã‚¬ã‚¤ãƒ‰

### ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

```bash
# ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/shuhei0720/keion-circle-site.git
cd keion-circle-site

# ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install

# ç’°å¢ƒå¤‰æ•°ã®è¨­å®šï¼ˆ.env.exampleã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ç·¨é›†ï¼‰
cp .env.example .env.local
# .env.localã‚’é–‹ã„ã¦ã€Supabaseã®æ¥ç¶šæƒ…å ±ã‚’è¨­å®šã—ã¦ãã ã•ã„

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®åˆæœŸåŒ–
npx prisma generate
npx prisma db push

# ç®¡ç†è€…ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä½œæˆ
node scripts/create-admin.js admin@example.com password123 "ç®¡ç†è€…å"

# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•
npm run dev
```

ãƒ–ãƒ©ã‚¦ã‚¶ã§ [http://localhost:3000](http://localhost:3000) ã‚’é–‹ã„ã¦ãã ã•ã„ã€‚

### ğŸ“ æœ‰ç”¨ãªã‚³ãƒãƒ³ãƒ‰

```bash
# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
npm run dev

# æœ¬ç•ªãƒ“ãƒ«ãƒ‰
npm run build

# æœ¬ç•ªã‚µãƒ¼ãƒãƒ¼èµ·å‹•
npm start

# Lintãƒã‚§ãƒƒã‚¯
npm run lint

# Prisma Studio ã§ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç¢ºèª
npm run db:studio

# Prisma Client å†ç”Ÿæˆ
npm run db:generate

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒé©ç”¨
npm run db:push
```

### ğŸ”§ ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

`.env.local` ãƒ•ã‚¡ã‚¤ãƒ«:

```env
# èªè¨¼è¨­å®š
AUTH_URL=http://localhost:3000
AUTH_SECRET=your-random-secret-key-at-least-32-chars
AUTH_TRUST_HOST=true

# NextAuth v5ç”¨ï¼ˆæœ¬ç•ªç’°å¢ƒã§ã‚‚åŒã˜å€¤ã‚’è¨­å®šï¼‰
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=your-random-secret-key-at-least-32-chars

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­å®šï¼ˆSupabase PostgreSQLï¼‰
# Supabase Dashboard â†’ Project Settings â†’ Database â†’ Connection String (Transaction pooler)
DATABASE_URL="postgresql://postgres.xxxxx:password@aws-0-ap-northeast-1.pooler.supabase.com:6543/postgres?pgbouncer=true&connection_limit=1"

# Google OAuthèªè¨¼ï¼ˆGoogle Cloud Consoleã§å–å¾—ï¼‰
# æ‰¿èªæ¸ˆã¿ã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆURI: http://localhost:3000/api/auth/callback/google
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret

# Supabaseè¨­å®šï¼ˆç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ç”¨ï¼‰
NEXT_PUBLIC_SUPABASE_URL=https://your-project-id.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-supabase-anon-key
```

**æœ¬ç•ªç’°å¢ƒï¼ˆVercelï¼‰**: ä¸Šè¨˜ã¨åŒã˜ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã—ã¾ã™ãŒã€`AUTH_URL` ã¨ `NEXTAUTH_URL` ã‚’æœ¬ç•ªURLã«å¤‰æ›´ã—ã¦ãã ã•ã„ã€‚

### ğŸ—„ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œ

**ã‚¹ã‚­ãƒ¼ãƒå¤‰æ›´ã®æµã‚Œ:**

1. `prisma/schema.prisma` ã‚’ç·¨é›†
2. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«åæ˜ :
   ```bash
   npx prisma db push
   npx prisma generate
   ```
3. æœ¬ç•ªç’°å¢ƒ: Vercel ã§è‡ªå‹•çš„ã« `npm run build` ãŒå®Ÿè¡Œã•ã‚Œã€ã‚¹ã‚­ãƒ¼ãƒãŒé©ç”¨ã•ã‚Œã¾ã™

**åˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ™‚ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–:**

```bash
# Prisma Clientã‚’ç”Ÿæˆ
npx prisma generate

# ã‚¹ã‚­ãƒ¼ãƒã‚’ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«é©ç”¨
npx prisma db push

# ç®¡ç†è€…ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆ
node scripts/create-admin.js admin@example.com password123 "ç®¡ç†è€…å"
```

**Prisma Studio ã§ãƒ‡ãƒ¼ã‚¿ç¢ºèª:**

```bash
npx prisma studio
```

ãƒ–ãƒ©ã‚¦ã‚¶ã§ http://localhost:5555 ãŒé–‹ãã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®å†…å®¹ã‚’GUIã§ç¢ºèªãƒ»ç·¨é›†ã§ãã¾ã™ã€‚

### ğŸ” èªè¨¼ãƒ•ãƒ­ãƒ¼å®Ÿè£…ä¾‹

**ã‚µãƒ¼ãƒãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§èªè¨¼ç¢ºèª:**

```typescript
import { getServerSession } from "next-auth";
import { authOptions } from "@/lib/auth";

export default async function Page() {
  const session = await getServerSession(authOptions);
  
  if (!session) {
    redirect("/auth/signin");
  }
  
  // ç®¡ç†è€…ãƒã‚§ãƒƒã‚¯
  if (session.user.role !== "admin") {
    return <div>ç®¡ç†è€…ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã§ã™</div>;
  }
  
  return <div>ç®¡ç†è€…ãƒšãƒ¼ã‚¸</div>;
}
```

**API Routeã§èªè¨¼ç¢ºèª:**

```typescript
import { getServerSession } from "next-auth";
import { authOptions } from "@/lib/auth";
import { NextRequest, NextResponse } from "next/server";

export async function POST(req: NextRequest) {
  const session = await getServerSession(authOptions);
  
  if (!session) {
    return NextResponse.json(
      { error: "èªè¨¼ãŒå¿…è¦ã§ã™" },
      { status: 401 }
    );
  }
  
  if (session.user.role !== "admin") {
    return NextResponse.json(
      { error: "ç®¡ç†è€…æ¨©é™ãŒå¿…è¦ã§ã™" },
      { status: 403 }
    );
  }
  
  // å‡¦ç†...
}
```

### ğŸ¨ ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°ã‚¬ã‚¤ãƒ‰

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯Tailwind CSS v4ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚

**ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ:**
- ãƒ—ãƒ©ã‚¤ãƒãƒª: `bg-blue-500`, `text-blue-600`
- ã‚»ã‚«ãƒ³ãƒ€ãƒª: `bg-gray-500`, `text-gray-600`
- æˆåŠŸ: `bg-green-500`, `text-green-600`
- ã‚¨ãƒ©ãƒ¼: `bg-red-500`, `text-red-600`
- è­¦å‘Š: `bg-yellow-500`, `text-yellow-600`

**ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³:**
```tsx
<div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
  {/* ãƒ¢ãƒã‚¤ãƒ«: 1åˆ—ã€ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆ: 2åˆ—ã€ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—: 3åˆ— */}
</div>
```

### ğŸ§ª ãƒ†ã‚¹ãƒˆ

ç¾åœ¨ã€ãƒ†ã‚¹ãƒˆã¯æœªå®Ÿè£…ã§ã™ãŒã€ä»¥ä¸‹ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®å°å…¥ã‚’æ¨å¥¨ã—ã¾ã™:

- **Unit Tests**: Jest + React Testing Library
- **E2E Tests**: Playwright
- **API Tests**: Supertest

---

## ğŸ” ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

- âœ… **ç’°å¢ƒå¤‰æ•°**: `.env.local` ã¯ Git ã«å«ã‚ãªã„ï¼ˆ`.gitignore` è¨­å®šæ¸ˆã¿ï¼‰
- âœ… **ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰**: bcryptjs ã«ã‚ˆã‚‹å®‰å…¨ãªãƒãƒƒã‚·ãƒ¥åŒ–ï¼ˆã‚½ãƒ«ãƒˆãƒ©ã‚¦ãƒ³ãƒ‰10ï¼‰
- âœ… **èªè¨¼**: NextAuth.js v5 ã«ã‚ˆã‚‹å …ç‰¢ãªèªè¨¼
- âœ… **CSRFå¯¾ç­–**: NextAuth.js ã®æ¨™æº–ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ©Ÿèƒ½
- âœ… **SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³**: Prisma ã«ã‚ˆã‚‹è‡ªå‹•é˜²æ­¢
- âœ… **XSSå¯¾ç­–**: React ã®è‡ªå‹•ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—
- âœ… **ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰**: ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºåˆ¶é™ï¼ˆ2MBï¼‰ã€MIME typeæ¤œè¨¼

---

## ğŸ“ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ MIT ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®ä¸‹ã§ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã•ã‚Œã¦ã„ã¾ã™ã€‚

---

## ğŸ¤ ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³

ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æ­“è¿ã—ã¾ã™ï¼ãƒã‚°å ±å‘Šã‚„æ©Ÿèƒ½ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯ [GitHub Issues](https://github.com/shuhei0720/keion-circle-site/issues) ã«ãŠé¡˜ã„ã—ã¾ã™ã€‚

**ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³æ‰‹é †:**
1. ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã‚’ãƒ•ã‚©ãƒ¼ã‚¯
2. æ©Ÿèƒ½ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ (`git checkout -b feature/amazing-feature`)
3. å¤‰æ›´ã‚’ã‚³ãƒŸãƒƒãƒˆ (`git commit -m 'Add amazing feature'`)
4. ãƒ–ãƒ©ãƒ³ãƒã«ãƒ—ãƒƒã‚·ãƒ¥ (`git push origin feature/amazing-feature`)
5. ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ä½œæˆ

---

## ğŸ“ ãŠå•ã„åˆã‚ã›

è³ªå•ã‚„ææ¡ˆãŒã‚ã‚‹å ´åˆã¯ã€[GitHub Issues](https://github.com/shuhei0720/keion-circle-site/issues) ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚

---

<div align="center">

**Built with â¤ï¸ by BOLD è»½éŸ³**

Â© 2025 BOLD è»½éŸ³. All rights reserved.

[ ãƒã‚°å ±å‘Š](https://github.com/shuhei0720/keion-circle-site/issues/new) | [ğŸ’¡ æ©Ÿèƒ½ãƒªã‚¯ã‚¨ã‚¹ãƒˆ](https://github.com/shuhei0720/keion-circle-site/issues/new)

</div>
